"use strict";function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}angular.module("webdan",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","firebase","firebase.ref","firebase.auth.app","ui.bootstrap","ngHandsontable"]),angular.module("webdan").config(["$routeProvider","SECURED_ROUTES",function(e,n){e.whenAuthenticated=function(r,t){return t.resolve=t.resolve||{},t.resolve.user=["Auth",function(e){return e.$requireSignIn()}],e.when(r,t),n[r]=!0,e}}]).config(["$routeProvider",function(e){e.when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).whenAuthenticated("/account",{templateUrl:"views/account.html",controller:"AccountCtrl"}).whenAuthenticated("/basic-information",{templateUrl:"views/basic-information/index.html",controller:"BasicInformationIndexCtrl",controllerAs:"ctrl"}).whenAuthenticated("/member-section",{templateUrl:"views/member-section/index.html",controller:"MemberSectionIndexCtrl",controllerAs:"ctrl"}).whenAuthenticated("/design-point",{templateUrl:"views/design-point.html",controller:"DesignPointCtrl",controllerAs:"ctrl"}).whenAuthenticated("/bars",{templateUrl:"views/bars/index.html",controller:"BarsIndexCtrl",controllerAs:"ctrl"}).whenAuthenticated("/fatigue",{templateUrl:"views/fatigue.html",controller:"FatigueCtrl",controllerAs:"ctrl"}).whenAuthenticated("/safety-factor-material-strength",{templateUrl:"views/safety-factor-material-strength.html",controller:"SafetyFactorMaterialStrengthCtrl",controllerAs:"ctrl"}).whenAuthenticated("/section-forces",{templateUrl:"views/section-forces.html",controller:"SectionForcesCtrl",controllerAs:"ctrl"}).whenAuthenticated("/calculation-print",{templateUrl:"views/calculation-print.html",controller:"CalculationPrintCtrl",controllerAs:"ctrl"}).whenAuthenticated("/words",{templateUrl:"views/words/index.html",controller:"WordsIndexCtrl",controllerAs:"ctrl"}).whenAuthenticated("/pages",{templateUrl:"views/pages/index.html",controller:"PagesIndexCtrl",controllerAs:"ctrl"}).whenAuthenticated("/section-shapes",{templateUrl:"views/section-shapes/index.html",controller:"SectionShapesIndexCtrl",controllerAs:"ctrl"}).whenAuthenticated("/conditions",{templateUrl:"views/conditions/index.html",controller:"ConditionsIndexCtrl",controllerAs:"ctrl"}).whenAuthenticated("/member-sections",{templateUrl:"views/member-sections/index.html",controller:"MemberSectionsIndexCtrl",controllerAs:"ctrl"}).whenAuthenticated("/members",{templateUrl:"views/members/index.html",controller:"MembersIndexCtrl",controllerAs:"ctrl"}).otherwise({redirectTo:"/basic-information"})}]).run(["$rootScope","$location","Auth","SECURED_ROUTES","loginRedirectPath",function(e,n,r,t,a){function o(e){!e&&i(n.path())&&n.path(a)}function i(e){return t.hasOwnProperty(e)}r.$onAuthStateChanged(o),e.$on("$routeChangeError",function(e,r,t,o){"AUTH_REQUIRED"===o&&n.path(a)})}]).constant("SECURED_ROUTES",{});var config={apiKey:"AIzaSyC0nZsDxgRm9S1ppN_mx0nWcrgL1FF5GFI",authDomain:"webdan-abcc6.firebaseapp.com",databaseURL:"https://webdan-abcc6.firebaseio.com",projectId:"webdan-abcc6",storageBucket:"webdan-abcc6.appspot.com",messagingSenderId:"1006569190487"};firebase.initializeApp(config),angular.module("firebase.config",[]).constant("FBURL","https://webdan.firebaseio.com").constant("SIMPLE_LOGIN_PROVIDERS",["password","google"]).constant("loginRedirectPath","/login"),angular.module("firebase.ref",["firebase"]).factory("Ref",["$window",function(e){return(new e.firebase.database).ref()}]),angular.module("webdan").factory("webdanRef",["Ref",function(e){return e.child("webdan")}]),function(){angular.module("firebase.auth.app",["firebase"]).factory("Auth",["$firebaseAuth",function(e){return e()}])}(),angular.module("webdan").controller("MainCtrl",["$scope",function(e){}]),angular.module("webdan").controller("ChatCtrl",["$scope","Ref","$firebaseArray","$timeout",function(e,n,r,t){function a(n){e.err=n,t(function(){e.err=null},5e3)}e.messages=r(n.child("messages").limitToLast(10)),e.messages.$loaded().catch(a),e.addMessage=function(n){n&&e.messages.$add({text:n}).catch(a)}}]),angular.module("webdan").controller("LoginCtrl",["$scope","Auth","$location","$q","Ref","$timeout",function(e,n,r,t,a,o){function i(e){return c(e.substr(0,e.indexOf("@"))||"")}function c(e){return e+="",e.charAt(0).toUpperCase()+e.substr(1)}function s(){r.path("/account")}function l(n){e.err=n}e.oauthLogin=function(r){e.err=null,n.$signInWithPopup(r,{rememberMe:!0}).then(s,l)},e.anonymousLogin=function(){e.err=null,n.$signInAnonymously({rememberMe:!0}).then(s,l)},e.passwordLogin=function(r,t){e.err=null,n.$signInWithPassword({email:r,password:t},{rememberMe:!0}).then(s,l)},e.createAccount=function(r,c,u){function d(e){var n=a.child("users",e.uid),c=t.defer();return n.set({email:r,name:i(r)},function(e){o(function(){e?c.reject(e):c.resolve(n)})}),c.promise}e.err=null,c?c!==u?e.err="Passwords do not match":n.$createUser({email:r,password:c}).then(function(){return n.$signInWithPassword({email:r,password:c},{rememberMe:!0})}).then(d).then(s,l):e.err="Please enter a password"}}]),angular.module("webdan").controller("AccountCtrl",["$scope","user","Auth","Ref","$firebaseObject","$timeout",function(e,n,r,t,a,o){function i(e){s(e,"danger")}function c(e){s(e,"success")}function s(n,r){var t={text:n+"",type:r};e.messages.unshift(t),o(function(){e.messages.splice(e.messages.indexOf(t),1)},1e4)}e.user=n,e.logout=function(){r.$signOut()},e.messages=[];var l=a(t.child("users/"+n.uid));l.$bindTo(e,"profile"),e.changePassword=function(n,t,a){e.err=null,n&&t?t!==a?i("Passwords do not match"):r.$changePassword({email:l.email,oldPassword:n,newPassword:t}).then(function(){c("Password changed")},i):i("Please enter all fields")},e.changeEmail=function(n,t){e.err=null,r.$changeEmail({password:n,newEmail:t,oldEmail:l.email}).then(function(){l.email=t,l.$save(),c("Email changed")}).catch(i)}}]),angular.module("webdan").filter("reverse",function(){return function(e){return angular.isArray(e)?e.slice().reverse():[]}}),angular.module("webdan").directive("ngShowAuth",["Auth","$timeout",function(e,n){return{restrict:"A",link:function(r,t){function a(){n(function(){t.toggleClass("ng-cloak",!e.$getAuth())},0)}t.addClass("ng-cloak"),e.$onAuthStateChanged(a),a()}}}]),angular.module("webdan").directive("ngHideAuth",["Auth","$timeout",function(e,n){return{restrict:"A",link:function(r,t){function a(){n(function(){t.toggleClass("ng-cloak",!!e.$getAuth())},0)}t.addClass("ng-cloak"),e.$onAuthStateChanged(a),a()}}}]),angular.module("webdan").controller("TabsCtrl",["$scope","$rootScope","$filter","appConfig","Page",function(e,n,r,t,a){var o=this;a.query().$loaded(function(e){var n=r("slug");e.forEach(function(e){e.slug=n(e.en)}),o.pages=e}),n.$on("$routeChangeSuccess",function(e,n){o.path=n.$$route.originalPath.substring(1)||"basic-information"})}]),angular.module("webdan").controller("DesignPointCtrl",["$scope",function(e){}]),angular.module("webdan").controller("FatigueCtrl",["$scope",function(e){}]),angular.module("webdan").controller("SafetyFactorMaterialStrengthCtrl",["$scope",function(e){}]),angular.module("webdan").controller("SectionForcesCtrl",["$scope",function(e){}]),angular.module("webdan").controller("CalculationPrintCtrl",["$scope","$uibModal","Calculation",function(e,n,r){this.calcStart=function(){n.open({templateUrl:r.page(3,2)}),window.open(r.page(3,2),"_blank")}}]),angular.module("webdan").factory("Calculation",function(){return{page:function(e,n){return"HTMLView.aspx"}}}),angular.module("webdan").constant("appConfig",function(){var e={};return e.messages={tabs:{"basic-information":"基本データ","member-section":"部材・断面","design-point":"算出点",bars:"鉄筋配置",fatigue:"疲労データ","safety-factor-material-strength":"安全係数・材料強度","section-forces":"断面力","calculation-print":"計算・印刷",words:"用語",pages:"項目"}},e}()),angular.module("webdan").controller("BasicInformationIndexCtrl",["$scope",function(e){var n=this;n.table={},n.table.a=[{stress:"耐久性 縁引張応力度検討用",pickupno:null},{stress:"耐久性 鉄筋応力度検討用",pickupno:null},{stress:"耐久性 (永久荷重)",pickupno:null},{stress:"耐久性 (変動荷重)",pickupno:null},{stress:"使用性 (外観ひび割れ)",pickupno:null},{stress:"安全性 (疲労破壊) 最小応力",pickupno:null},{stress:"安全性 (疲労破壊) 最大応力",pickupno:null},{stress:"安全性 (破壊)",pickupno:null},{stress:"復旧性 (損傷 地震時以外)",pickupno:null},{stress:"復旧性 (損傷 地震時)",pickupno:null}],n.table.b=[{stress:"耐久性 せん断ひび割れ検討判定用",pickupno:null},{stress:"耐久性 (永久荷重)",pickupno:null},{stress:"耐久性 (変動荷重)",pickupno:null},{stress:"安全性 (疲労破壊) 最小応力",pickupno:null},{stress:"安全性 (疲労破壊) 最大応力",pickupno:null},{stress:"安全性 (破壊)",pickupno:null},{stress:"復旧性 (損傷 地震時以外)",pickupno:null},{stress:"復旧性 (損傷 地震時)",pickupno:null}]}]);var _slicedToArray=function(){function e(e,n){var r=[],t=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(t=(i=c.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(e){a=!0,o=e}finally{try{!t&&c.return&&c.return()}finally{if(a)throw o}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();angular.module("webdan").controller("MemberSectionIndexCtrl",["$scope","$compile","$log","$q","Member","SectionShape","Condition","MemberSection",function(e,n,r,t,a,o,i,c){function s(e){u.memberSections.splice(e,1)}function l(e){e.$dirty=!1}var u=this;u.settings={},u.settings.memberSections={minSpareRows:1,colHeaders:!0,nestedHeaders:[['<span header-rowspan="2">部材<br>番号</span>','<span header-rowspan="2">部材長</span>','<span header-rowspan="2">グループ <br>No.</span>','<span header-rowspan="2">部材名</span>','<span header-rowspan="2">断面形状</span>',{label:"断面 (mm)",colspan:4},{label:"環境条件",colspan:3},{label:"外観",colspan:2},"ひび割","せん断",{label:"鉄筋 曲げ加工 r<sub>1</sub>",colspan:3},'<span header-rowspan="2" class="vertical-container"><span class="vertical">部材数</span></span>','<span header-rowspan="2">疲労<br>パス</span>'],["","","","","","B","H","B<sub>t</sub>","t","上側","下側","せん断","上側","下側","&epsilon;<sub>csd</sub>","k<sub>r</sub>","軸鉄筋","帯筋","折曲げ","",""]],columns:[{data:"m_no",type:"numeric"},{data:"m_len",type:"numeric",format:"0.000"},{data:"g_no",type:"numeric",format:"0.0"},{data:"g_name"},{data:"shape_no",type:"numeric",renderer:o.renderName},{data:"B",type:"numeric"},{data:"H",type:"numeric"},{data:"Bt",type:"numeric"},{data:"t",type:"numeric"},{data:"con_u",type:"numeric"},{data:"con_l",type:"numeric"},{data:"con_s",type:"numeric"},{data:"vis_u",type:"checkbox"},{data:"vis_l",type:"checkbox"},{data:"ecsd",type:"numeric"},{data:"kr",type:"numeric",format:"0.0"},{data:"r1_1",type:"numeric",format:"0.00"},{data:"r1_2",type:"numeric",format:"0.00"},{data:"r1_3",type:"numeric",format:"0.00"},{data:"n",type:"numeric"},{data:"flg_fatigue",type:"checkbox"}],afterChange:function(e,n){(e||[]).forEach(function(e){var n=_slicedToArray(e,4),r=n[0],t=(n[1],n[2],n[3],u.memberSections[r]);t&&(t.$dirty=!0)})},afterRender:function(){n(this.rootElement)(e)}},u.settings.sectionShapes={readOnly:!0,rowHeaders:!0,columns:[{data:"name"}]},u.settings.conditions={readOnly:!0,rowHeaders:!0,columns:[{data:"name"}]},u.isDirty=function(){return(u.memberSections||[]).some(function(e){return!!e.$dirty})},u.save=function(){u.memberSections.forEach(function(e){if(e.$dirty)try{if(c.isEmpty(e)){var n=u.memberSections.indexOf(e);e.$id?c.remove(e).then(function(e){s(n)}):s(n)}else e.$id?c.save(e).then(function(n){l(e)}):c.add(e).then(function(n){e.$id=n.key,l(e)})}catch(e){r.error(e)}})},function(){u.members=a.query(),u.sectionShapes=o.query(),u.conditions=i.query(),u.memberSections=c.query()}()}]),angular.module("webdan").controller("BarsIndexCtrl",["$scope","$compile","$log","Bar",function(e,n,r,t){var a=this;a.bars=t.query(),a.settings={minSpareRows:1,colHeaders:!0,nestedHeaders:[['<span header-rowspan="3">No.</span>','<span header-rowspan="3" class="vertical-container"><span class="vertical">部材番号</span></span>','<span header-rowspan="3">算出点名</span>',"断面","ハンチ高",{label:"軸方向鉄筋",colspan:7},{label:"側方鉄筋",colspan:3},{label:"スターラップ",colspan:3},'<span header-rowspan="3">主筋の<br>斜率</span>','<span header-rowspan="3">tan&gamma;<br> + <br>tan&beta;</span>',{label:"折曲げ鉄筋",colspan:4},'<span header-rowspan="3" class="vertical-container"><span class="vertical">処理</span></span>'],["","","","B","曲げ",'<span header-rowspan="2" class="vertical-container"><span class="vertical">位置</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">鉄筋径</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">本数</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">一段目<br>カブリ</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">並び数</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">アキ</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">間隔</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">鉄筋径</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">本数片</span></span>','<span header-rowspan="2">上端位置<br>/ピッチ</span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">鉄筋径</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">組数</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">間隔</span></span>',"","",'<span header-rowspan="2" class="vertical-container"><span class="vertical">鉄筋径</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">本数</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">間隔</span></span>','<span header-rowspan="2" class="vertical-container"><span class="vertical">角度</span></span>',""],["","","","H","せん断","","","","","","","","","","","","","","","","","","","",""]],columns:[{data:"no",type:"numeric"},{data:"m_no",type:"numeric",format:"0.000"},{data:"p_name",type:"numeric",format:"0.0"},{data:"BH",type:"numeric"},{data:"dH",type:"numeric"},{data:"reber_side",type:"numeric"},{data:"reber_01",type:"numeric"},{data:"reber_02",type:"numeric"},{data:"reber_03",type:"numeric"},{data:"reber_04",type:"numeric"},{data:"reber_05",type:"checkbox"},{data:"reber_06",type:"checkbox"},{data:"sideber_01",type:"numeric"},{data:"sideber_02",type:"numeric",format:"0.0"},{data:"sideber_03",type:"numeric",format:"0.00"},{data:"hoop_01",type:"numeric",format:"0.00"},{data:"hoop_02",type:"numeric",format:"0.00"},{data:"hoop_03",type:"numeric"},{data:"reber_07",type:"numeric"},{data:"reber_08",type:"numeric"},{data:"bent_01",type:"numeric"},{data:"bent_02",type:"numeric"},{data:"bent_03",type:"numeric"},{data:"bent_04",type:"numeric"},{data:"flg_enable",type:"numeric"}],afterRender:function(){n(this.rootElement)(e)}}}]);var _slicedToArray=function(){function e(e,n){var r=[],t=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(t=(i=c.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(e){a=!0,o=e}finally{try{!t&&c.return&&c.return()}finally{if(a)throw o}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();angular.module("webdan").controller("WordsIndexCtrl",["$scope","$log","Page","Word",function(e,n,r,t){var a=this;a.pages=r.query(),a.settings={allowInvalid:!1,colHeaders:["番号","日本語","英語","変数 as text","変数 as html"],colWidths:[50,200,200,100,200],columns:[{data:"pointer",type:"numeric"},{data:"ja"},{data:"en",validator:t.validators.en},{data:"var.text",validator:t.validators.var.text},{data:"var.html"}],contextMenu:["remove_row"],afterChange:function(e,r){(e||[]).forEach(function(e){try{var r=_slicedToArray(e,4),t=r[0],o=(r[1],r[2],r[3],a.words[t]);o&&(o.$dirty=!0)}catch(e){n.error(e)}})},beforeRemoveRow:function(e,n,r){r.forEach(function(e){var n=a.words[e];n&&n.$id&&t.remove(n)})}},a.select=function(e){a.page=e,t.query(e.$id).$loaded(function(e){a.origWords=e,a.words=angular.copy(e)})},a.isDirty=function(){return(a.words||[]).some(function(e){return!!e.$dirty})},a.save=function(){return(a.words||[]).forEach(function(e){if(e.$dirty)try{if(t.isEmpty(e)){if(e.$id){var r=a.words.indexOf(e);t.remove(e).then(function(e){a.words.splice(r,1)})}}else e.$id?t.save(e).then(function(n){e.$dirty=!1}):(e.page=a.page.$id,t.add(e).then(function(n){e.$dirty=!1}))}catch(e){n.error(e)}})}}]),angular.module("webdan").factory("Word",["webdanRef","$firebaseArray","$firebaseObject","$firebaseUtils",function(e,n,r,t){var a=e.child("words"),o=n(a),i={};return i.validators={en:/[A-Za-z0-9\s]*/,var:{text:/[^<>]*/}},i.query=function(e){if(e){var r=a.orderByChild("page").equalTo(e);return n(r)}return o},i.add=function(e){return o.$add(e).then(function(n){e.$id=n.key}).catch(function(e){throw e})},i.save=function(e){var n=o.$getRecord(e.$id),r=t.toJSON(e);return angular.extend(n,r),o.$save(n).then(function(e){}).catch(function(e){throw e})},i.update=function(e,n,t){var o=e+"/"+n.replace(".","/"),i=a.child(o),c=r(i);return c.$value=t,c.$save().catch(function(e){throw e})},i.remove=function(e){var n=o.$getRecord(e.$id);return o.$remove(n).catch(function(e){throw e})},i.isEmpty=function(e){return Object.keys(e).filter(function(e){return!e.startsWith("$")}).every(function(n){switch(n){case"page":return!0;case"var":return!e.var.text&&!e.var.html;default:return!e[n]}})},i}]);var _slicedToArray=function(){function e(e,n){var r=[],t=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(t=(i=c.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(e){a=!0,o=e}finally{try{!t&&c.return&&c.return()}finally{if(a)throw o}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();angular.module("webdan").controller("PagesIndexCtrl",["$scope","$log","Page",function(e,n,r){var t=this;t.settings={allowInvalid:!1,colHeaders:["日本語","英語"],columns:[{data:"ja",validator:r.validators.ja},{data:"en",validator:r.validators.en}],afterChange:function(e,a){if("loadData"!==a)try{changes.forEach(function(e){var n=_slicedToArray(e,4),a=n[0],o=n[1],i=(n[2],n[3]),c=t.pages[a];angular.isUndefined(c.$id)?r.add(c):r.update(c.$id,o,i)})}catch(e){n.error(e)}}};var a=void 0;r.query().$loaded(function(e){a=e,t.pages=angular.copy(e)})}]),angular.module("webdan").factory("Page",["webdanRef","$firebaseArray",function(e,n){var r=e.child("pages"),t=n(r),a={};return a.validators={ja:/.+/,en:/[A-Za-z0-9\s]*/},a.query=function(){return t},a.add=function(e){return t.$add(e).then(function(n){e.$id=n.key}).catch(function(e){throw e})},a.update=function(e,n,r){var a=t.$getRecord(e);return a[n]=r,t.$save(a).catch(function(e){throw e})},a}]),angular.module("webdan").filter("slug",function(){return function(e){return(e||"").replace(/\s/g,"-")}}),angular.module("webdan").directive("headerRowspan",["hotRegisterer",function(e){return{restrict:"A",link:function(e,n,r){var t=n.parents("th").attr("rowspan",r.headerRowspan),a=t.parents("tr").addClass("has-rowspan"),o=t.prop("cellIndex");a.nextAll("tr").each(function(e,n){var r=$(n);r.children(":nth-child("+(o+1)+")").addClass("hide-for-rowspan"),r.children(":nth-child("+(o+2)+")").addClass("next-to-rowspan")})}}}]),angular.module("webdan").factory("MemberSection",["webdanRef","$firebaseArray","$firebaseObject","$firebaseUtils",function(e,n,r,t){function a(e,n,r){var t=i.$getRecord(n);return t&&angular.element(e).html(t[r]||""),e}var o=e.child("memberSections"),i=n(o),c={};return c.query=function(){return i},c.remove=function(e){var n=i.$getRecord(e.$id);return i.$remove(n).catch(function(e){throw e})},c.save=function(e){var n=i.$getRecord(e.$id),r=t.toJSON(e);return angular.extend(n,r),i.$save(n).catch(function(e){throw e})},c.add=function(e){return i.$add(e).catch(function(e){throw e})},c.isEmpty=function(e){return!e.g_no&&!e.g_name},c.selectOptions=function(){return selectOptions||(selectOptions={},i.forEach(function(e){selectOptions[e.$id]=e.name})),selectOptions},c.renderName=function(e,n,r,t,o,i,c){return a(n,i,"name")},c}]),angular.module("webdan").factory("SectionShape",["webdanRef","$firebaseArray","$firebaseObject","$firebaseUtils",function(e,n,r,t){var a=e.child("sectionShapes"),o=n(a),i={},c=void 0;return i.query=function(e){return o},i.remove=function(e){var n=o.$getRecord(e.$id);return o.$remove(n).catch(function(e){throw e})},i.save=function(e){var n=o.$getRecord(e.$id),r=t.toJSON(e);return angular.extend(n,r),o.$save(n).catch(function(e){throw e})},i.add=function(e){return o.$add(e).catch(function(e){throw e})},i.isEmpty=function(e){return!e.name.trim()},i.selectOptions=function(){return c||(c={},o.forEach(function(e){c[e.$id]=e.name})),c},i.renderName=function(e,n,r,t,a,i,c){if(o.$resolved){var s=o.filter(function(e){return e.no==i});s.length&&angular.element(n).html(s[0].name)}return n},i}]),angular.module("webdan").factory("Condition",["webdanRef","$firebaseArray","$firebaseObject","$firebaseUtils",function(e,n,r,t){function a(e,n,r){var t=i.$getRecord(n);return t&&angular.element(e).html(t[r]||""),e}var o=e.child("conditions"),i=n(o),c={},s=void 0;return c.query=function(e){return i},c.remove=function(e){var n=i.$getRecord(e.$id);return i.$remove(n).catch(function(e){throw e})},c.save=function(e){var n=i.$getRecord(e.$id),r=t.toJSON(e);return angular.extend(n,r),i.$save(n).catch(function(e){throw e})},c.add=function(e){return i.$add(e).catch(function(e){throw e})},c.isEmpty=function(e){return!e.name.trim()},c.selectOptions=function(){return s||(s={},i.forEach(function(e){s[e.$id]=e.name})),s},c.renderName=function(e,n,r,t,o,i,c){return a(n,i,"name")},c}]),angular.module("webdan").factory("Member",["webdanRef","$firebaseArray","$firebaseObject","$firebaseUtils",function(e,n,r,t){function a(e,n,r){var t=i.$getRecord(n);return t&&angular.element(e).html(t[r]||""),e}var o=e.child("members"),i=n(o),c={},s=void 0;return c.query=function(e){return i},c.remove=function(e){var n=i.$getRecord(e.$id);return i.$remove(n).catch(function(e){throw e})},c.save=function(e){var n=i.$getRecord(e.$id),r=t.toJSON(e);return angular.extend(n,r),i.$save(n).catch(function(e){throw e})},c.add=function(e){return i.$add(e).catch(function(e){throw e})},c.isEmpty=function(e){return!e.g_no.trim()&&!e.g_name.trim()},c.selectOptions=function(){return s||(s={},i.forEach(function(e){s[e.$id]=e.g_name})),s},c.renderName=function(e,n,r,t,o,i,c){return a(n,i,"g_name")},c.renderNo=function(e,n,r,t,o,i,c){return a(n,i,"g_no")},c}]);var _slicedToArray=function(){function e(e,n){var r=[],t=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(t=(i=c.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(e){a=!0,o=e}finally{try{!t&&c.return&&c.return()}finally{if(a)throw o}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();angular.module("webdan").controller("SectionShapesIndexCtrl",["$scope","$log","SectionShape",function(e,n,r){function t(e){c.sectionShapes.splice(e,1)}function a(e){e.$dirty=!1}var o,i,c=this;c.sectionShapes=[],r.query().$loaded(function(e){i=e,c.sectionShapes=angular.copy(e)}),c.settings=(o={minSpareRows:1,colHeaders:!0,rowHeaders:!1},_defineProperty(o,"colHeaders",["No","形状名"]),_defineProperty(o,"columns",[{data:"no",type:"numeric"},{data:"name"}]),_defineProperty(o,"afterChange",function(e,n){(e||[]).forEach(function(e){var n=_slicedToArray(e,4),r=n[0],t=(n[1],n[2],n[3],c.sectionShapes[r]);t&&(t.$dirty=!0)})}),o),c.isDirty=function(){return c.sectionShapes.some(function(e){return!!e.$dirty})},c.save=function(){c.sectionShapes.forEach(function(e){if(e.$dirty)try{if(r.isEmpty(e)){var o=c.sectionShapes.indexOf(e);e.$id?r.remove(e).then(function(e){t(o)}):t(o)}else e.$id?r.save(e).then(function(n){a(e)}):r.add(e).then(function(n){e.$id=n.key,a(e)})}catch(e){n.error(e)}})}}]);var _slicedToArray=function(){function e(e,n){var r=[],t=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(t=(i=c.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(e){a=!0,o=e}finally{try{!t&&c.return&&c.return()}finally{if(a)throw o}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();angular.module("webdan").controller("ConditionsIndexCtrl",["$scope","$log","Condition",function(e,n,r){function t(e){c.conditions.splice(e,1)}function a(e){e.$dirty=!1}var o,i,c=this;c.conditions=[],r.query().$loaded(function(e){i=e,c.conditions=angular.copy(e)}),c.settings=(o={minSpareRows:1,colHeaders:!0,rowHeaders:!0},_defineProperty(o,"colHeaders",["部材名"]),_defineProperty(o,"columns",[{data:"name"}]),_defineProperty(o,"afterChange",function(e,n){(e||[]).forEach(function(e){var n=_slicedToArray(e,4),r=n[0],t=(n[1],n[2],n[3],c.conditions[r]);t&&(t.$dirty=!0)})}),o),c.isDirty=function(){return c.conditions.some(function(e){return!!e.$dirty})},c.save=function(){c.conditions.forEach(function(e){if(e.$dirty)try{if(r.isEmpty(e)){var o=c.conditions.indexOf(e);e.$id?r.remove(e).then(function(e){t(o)}):t(o)}else e.$id?r.save(e).then(function(n){a(e)}):r.add(e).then(function(n){e.$id=n.key,a(e)})}catch(e){n.error(e)}})}}]),angular.module("webdan").controller("MemberSectionsIndexCtrl",function(e){e.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]});var _slicedToArray=function(){function e(e,n){var r=[],t=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(t=(i=c.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(e){a=!0,o=e}finally{try{!t&&c.return&&c.return()}finally{if(a)throw o}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();angular.module("webdan").controller("MembersIndexCtrl",["$scope","$log","Member",function(e,n,r){function t(e){c.members.splice(e,1)}function a(e){e.$dirty=!1}var o,i,c=this;c.members=[],r.query().$loaded(function(e){i=e,c.members=angular.copy(e)}),c.settings=(o={minSpareRows:1,colHeaders:!0,rowHeaders:!0},_defineProperty(o,"colHeaders",["グループ No.","部材名"]),_defineProperty(o,"columns",[{data:"g_no"},{data:"g_name"}]),_defineProperty(o,"afterChange",function(e,n){(e||[]).forEach(function(e){var n=_slicedToArray(e,4),r=n[0],t=(n[1],n[2],n[3],c.members[r]);t&&(t.$dirty=!0)})}),o),c.isDirty=function(){return c.members.some(function(e){return!!e.$dirty})},c.save=function(){c.members.forEach(function(e){if(e.$dirty)try{if(r.isEmpty(e)){var o=c.members.indexOf(e);e.$id?r.remove(e).then(function(e){t(o)}):t(o)}else e.$id?r.save(e).then(function(n){a(e)}):r.add(e).then(function(n){e.$id=n.key,a(e)})}catch(e){n.error(e)}})}}]),angular.module("webdan").factory("Bar",["webdanRef","$firebaseArray","$firebaseObject","$firebaseUtils",function(e,n,r,t){var a=e.child("bars"),o=n(a),i={};return i.query=function(e){return o},i.remove=function(e){var n=o.$getRecord(e.$id);return o.$remove(n).catch(function(e){throw e})},i.save=function(e){var n=o.$getRecord(e.$id),r=t.toJSON(e);return angular.extend(n,r),o.$save(n).catch(function(e){throw e})},i.add=function(e){return o.$add(e).catch(function(e){throw e})},i.isEmpty=function(e){return!1},i}]);