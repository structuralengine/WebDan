<div *ngIf="isLoading" class="spinner-border" style="width: 1rem; height: 1rem;" role="status">
  <span class="sr-only">Loading...</span>
</div>

<ng-container *ngIf="!isLoading">
  <ng-container *ngIf="isFulfilled">

    <section class="sheet">
      <svg width="180mm" height="260mm" viewBox="0 0 180 260" xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">
        <!--タイトル-->
        <g font-size="2.3pt" text-anchor="start">
          <text x="0" y="11">3.1 安全性の照査</text>
          <text x="5" y="21">3.1.1破壊に関する 安全性【コンクリート標準　7.2】 </text>
          <text x="5" y="26">(1)曲げモーメントと軸方向力に対する照査【コンクリート標準 7.2】</text>
          <text x="10" y="31">曲げモーメントと軸方向力を受ける部材の照査は、設計曲げモーメント</text>
          <text x="118" y="31">
            M<tspan baseline-shift="0%" font-size="1.6pt">d</tspan>
          </text>
          <text x="121" y="31">を設計応答値、設</text>
          <text x="5" y="36">計曲げ耐力</text>
          <text x="22" y="36">
            M<tspan baseline-shift="0%" font-size="1.6pt">ud</tspan>
          </text>
          <text x="26" y="36">を設計限界値として以下に示す式により行う。</text>
          <text x="10" y="41">γi・</text>
          <text x="18" y="41">
            M<tspan baseline-shift="0%" font-size="1.6pt">d</tspan>
          </text>
          <text x="21" y="41">/</text>
          <text x="24" y="41">
            M<tspan baseline-shift="0%" font-size="1.6pt">ud</tspan>
          </text>
          <text x="29" y="41">≦1.0</text>
          <text x="10" y="46">ここに、　γi：　構造物係数</text>
          <text x="28" y="51">
            M<tspan baseline-shift="0%" font-size="1.6pt">d</tspan>
          </text>
          <text x="32" y="51">：　設計曲げモーメント</text>
          <text x="28" y="56">
            M<tspan baseline-shift="0%" font-size="1.6pt">ud</tspan>
          </text>
          <text x="32" y="56">：　設計曲げ耐力(</text>
          <text x="61" y="56">
            M<tspan baseline-shift="0%" font-size="1.6pt">ud</tspan>
          </text>
          <text x="66" y="56">=</text>
          <text x="70" y="56">
            M<tspan baseline-shift="0%" font-size="1.6pt">u</tspan>
          </text>
          <text x="74" y="56">/</text>
          <text x="76" y="56">
            γ<tspan baseline-shift="0%" font-size="1.6pt">b</tspan>
          </text>
          <text x="82" y="56">)</text>
          <text x="28" y="61">
            γ<tspan baseline-shift="0%" font-size="1.6pt">b</tspan>
          </text>
          <text x="32" y="61">：　部材係数</text>
        </g>

      </svg>
    </section>
    
    <ng-container *ngFor="let pages of safetyMomentPages; index as i">
      <section class="sheet">
        <svg width="150mm" height="260mm" viewBox="0 0 150 260" xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">
          <!--タイトル-->
          <text x="0" y="11" font-size="2.2pt" text-anchor="start">{{pages.caption}} (その{{i+1}})</text>
          <text x="150" y="11" font-size="2.2pt" text-anchor="end">[{{pages.g_name}}]</text>
          <!--横線-->
          <g fill="none" stroke="black">
            <line stroke-width="0.35" x1="0" y1="12" x2="150" y2="12" />
            <line stroke-width="0.20" x1="0" y1="17" x2="150" y2="17" />
            <line stroke-width="0.20" x1="0" y1="22" x2="150" y2="22" />
            <line stroke-width="0.35" x1="0" y1="27" x2="150" y2="27" />
            <line stroke-width="0.20" x1="0" y1="32" x2="150" y2="32" />
            <line stroke-width="0.20" x1="0" y1="37" x2="150" y2="37" />
            <line stroke-width="0.20" x1="0" y1="42" x2="150" y2="42" />
            <line stroke-width="0.35" x1="0" y1="47" x2="150" y2="47" />
            <line stroke-width="0.20" x1="0" y1="57" x2="150" y2="57" />
            <line stroke-width="0.20" x1="0" y1="62" x2="150" y2="62" />
            <line stroke-width="0.20" x1="0" y1="72" x2="150" y2="72" />
            <line stroke-width="0.20" x1="0" y1="77" x2="150" y2="77" />
            <line stroke-width="0.20" x1="0" y1="87" x2="150" y2="87" />
            <line stroke-width="0.35" x1="0" y1="92" x2="150" y2="92" />
            <line stroke-width="0.20" x1="0" y1="97" x2="150" y2="97" />
            <line stroke-width="0.20" x1="0" y1="102" x2="150" y2="102" />
            <line stroke-width="0.20" x1="0" y1="107" x2="150" y2="107" />
            <line stroke-width="0.20" x1="0" y1="112" x2="150" y2="112" />
            <line stroke-width="0.20" x1="0" y1="117" x2="150" y2="117" />
            <line stroke-width="0.35" x1="0" y1="122" x2="150" y2="122" />
            <line stroke-width="0.20" x1="0" y1="127" x2="150" y2="127" />
            <line stroke-width="0.35" x1="0" y1="132" x2="150" y2="132" />
            <line stroke-width="0.20" x1="0" y1="137" x2="150" y2="137" />
            <line stroke-width="0.20" x1="0" y1="142" x2="150" y2="142" />
            <line stroke-width="0.20" x1="0" y1="147" x2="150" y2="147" />
            <line stroke-width="0.20" x1="0" y1="152" x2="150" y2="152" />
            <line stroke-width="0.20" x1="0" y1="157" x2="150" y2="157" />
            <line stroke-width="0.20" x1="0" y1="162" x2="150" y2="162" />
            <line stroke-width="0.35" x1="0" y1="167" x2="150" y2="167" />
            <line stroke-width="0.20" x1="0" y1="172" x2="150" y2="172" />
            <line stroke-width="0.35" x1="0" y1="177" x2="150" y2="177" />
          </g>
          <!--縦線-->
          <g fill="none" stroke="black">
            <line stroke-width="0.35" x1="30" y1="12" x2="30" y2="177" />
            <line stroke-width="0.20" x1="54" y1="12" x2="54" y2="177" />
            <line stroke-width="0.20" x1="78" y1="12" x2="78" y2="177" />
            <line stroke-width="0.20" x1="102" y1="12" x2="102" y2="177" />
            <line stroke-width="0.20" x1="126" y1="12" x2="126" y2="177" />
          </g>
          <!--Row Header-->
          <g font-size="2.2pt" text-anchor="middle">
            <text x="15" y="16">部材名称</text>
            <text x="15" y="21">位　　置</text>
            <text x="15" y="26">断面番号</text>

            <text x="8" y="31">B</text><text x="20" y="31">(mm)</text>
            <text x="8" y="36">H</text><text x="20" y="36">(mm)</text>
            <text x="8" y="41">Bf</text><text x="20" y="41">(mm)</text>
            <text x="8" y="46">Hf</text><text x="20" y="46">(mm)</text>

            <text x="8" y="51">Ast</text>
            <text x="20" y="51">
              (mm<tspan baseline-shift="20%" font-size="1.6pt">2</tspan>)
            </text>
            <text x="15" y="56">引張鉄筋</text>
            <text x="8" y="61">dast</text><text x="20" y="61">(mm)</text>

            <text x="8" y="66">Asc</text>
            <text x="20" y="66">
              (mm<tspan baseline-shift="20%" font-size="1.6pt">2</tspan>)
            </text>
            <text x="15" y="71">圧縮鉄筋</text>
            <text x="8" y="76">dasc</text><text x="20" y="76">(mm)</text>

            <text x="8" y="81">Ase</text>
            <text x="20" y="81">
              (mm<tspan baseline-shift="20%" font-size="1.6pt">2</tspan>)
            </text>
            <text x="15" y="86">側方鉄筋</text>
            <text x="8" y="91">dase</text><text x="20" y="91">(mm)</text>

            <text x="8" y="96">f'ck</text>
            <text x="20" y="96">
              (N/mm<tspan baseline-shift="20%" font-size="1.6pt">2</tspan>)
            </text>
            <text x="15" y="101">γc</text>
            <text x="8" y="106">f'cd</text>
            <text x="20" y="106">
              (N/mm<tspan baseline-shift="20%" font-size="1.6pt">2</tspan>)
            </text>

            <text x="8" y="111">fsyk</text>
            <text x="20" y="111">
              (N/mm<tspan baseline-shift="20%" font-size="1.6pt">2</tspan>)
            </text>
            <text x="15" y="116">γs</text>
            <text x="8" y="121">fsyd</text>
            <text x="20" y="121">
              (N/mm<tspan baseline-shift="20%" font-size="1.6pt">2</tspan>)
            </text>

            <text x="8" y="126">Md</text><text x="20" y="126">(kN･m)</text>
            <text x="8" y="131">N'd</text><text x="20" y="131">(kN)</text>

            <text x="15" y="136">ε'cu</text>
            <text x="15" y="141">εs</text>
            <text x="8" y="146">x</text><text x="20" y="146">(mm)</text>
            <text x="8" y="151">Mu</text><text x="20" y="151">(kN･m)</text>
            <text x="15" y="156">γb</text>
            <text x="8" y="161">Mud</text><text x="20" y="161">(kN･m)</text>
            <text x="15" y="166">γi</text>

            <text x="15" y="171">γi･Md/Mud</text>
            <text x="15" y="176">照査結果</text>
          </g>
          <!--calclate-->
          <g font-size="2.2pt">
            <ng-container *ngFor="let column of pages.columns; index as c">
              <ng-container *ngFor="let item of column; index as r">
                <ng-container *ngIf="item.value != ''">
                  <text *ngIf="item.alien == 'right'" text-anchor="end" [attr.x]="48+c*24"
                    [attr.y]="16+r*5">{{item.value}}</text>
                  <text *ngIf="item.alien == 'center'" text-anchor="middle" [attr.x]="42+c*24"
                    [attr.y]="16+r*5">{{item.value}}</text>
                </ng-container>
              </ng-container>
            </ng-container>
          </g>
        </svg>
      </section>
    </ng-container>

  </ng-container>
  <section *ngIf="err.length > 0" class="sheet">
      <p >{{err}}</p>
  </section>
</ng-container>