<div
  *ngIf="isLoading"
  class="spinner-border"
  style="width: 1rem; height: 1rem;"
  role="status"
>
  <span class="sr-only">Loading...</span>
</div>

<ng-container *ngIf="!isLoading">
  <ng-container *ngIf="isFulfilled">
    <div id="ap_0"></div>

    <ng-container *ngFor="let page of pages">
      <section class="sheet">
        <h3 class="h3">{{ page.g_name }}</h3>
        <ng-container *ngFor="let table of page.tables">
          <svg
            [attr.viewBox]="table.viewBox"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            version="1.1"
          >
            <!--タイトル-->
            <text x="0" y="11" font-size="2.3pt" text-anchor="start">
              {{ table.title }}
            </text>

            <!--column Header-->
            <g font-size="2.3pt" text-anchor="middle">
              <text x="4" y="16">部材</text>
              <text x="4" y="20">番号</text>
              <text x="13" y="16">算出</text>
              <text x="13" y="20">番号</text>

              <text x="26" y="16">算出点</text>
              <text x="42" y="16">算 出 点 名</text>
              <text x="80" y="16">上　　 側</text>
              <text x="125" y="16">下　　 側</text>
              <text x="63" y="21">M</text>
              <text x="71" y="21">(kN･m)</text>
              <text x="81" y="21">N</text>
              <text x="89" y="21">(kN)</text>
              <text x="99" y="21">comb</text>
              <text x="107" y="21">M</text>
              <text x="115" y="21">(kN･m)</text>
              <text x="125" y="21">N</text>
              <text x="133" y="21">(kN)</text>
              <text x="145" y="21">comb</text>
            </g>
            <!--横線-->
            <g fill="none" stroke="black">
              <line stroke-width="0.35" x1="0" y1="12" x2="150" y2="12" />
              <line stroke-width="0.20" x1="59" y1="17" x2="150" y2="17" />
              <line stroke-width="0.35" x1="0" y1="22" x2="150" y2="22" />
            </g>

            <ng-container *ngFor="let row of table.rows; index as r">
              <!--横線-->
              <g fill="none" stroke="black">
                <line
                  stroke-width="0.20"
                  x1="0"
                  [attr.y1]="27 + r * 4"
                  x2="150"
                  [attr.y2]="27 + r * 4"
                />
              </g>
              <!--column Header-->
              <g font-size="2.3pt">
                <text x="5" [attr.y]="26 + r * 4" text-anchor="middle">
                  {{ row.m_no }}
                </text>
                <text x="13" [attr.y]="26 + r * 4" text-anchor="middle">
                  {{ row.p_name }}
                </text>
                <text x="30" [attr.y]="26 + r * 4" text-anchor="end">
                  {{ row.position }}
                </text>
                <text x="35" [attr.y]="26 + r * 4" text-anchor="start">
                  {{ row.p_name_ex }}
                </text>
                <text x="74" [attr.y]="26 + r * 4" text-anchor="end">
                  {{ row.upper.Md }}
                </text>
                <text x="92" [attr.y]="26 + r * 4" text-anchor="end">
                  {{ row.upper.Nd }}
                </text>
                <text x="100" [attr.y]="26 + r * 4" text-anchor="middle">
                  {{ row.upper.comb }}
                </text>
                <text x="119" [attr.y]="26 + r * 4" text-anchor="end">
                  {{ row.lower.Md }}
                </text>
                <text x="137" [attr.y]="26 + r * 4" text-anchor="end">
                  {{ row.lower.Nd }}
                </text>
                <text x="147" [attr.y]="26 + r * 4" text-anchor="middle">
                  {{ row.lower.comb }}
                </text>
              </g>
            </ng-container>

            <!--縦線-->
            <g fill="none" stroke="black">
              <line
                stroke-width="0.20"
                x1="7"
                y1="12"
                x2="7"
                [attr.y2]="23 + table.rows.length * 4"
              />
              <line
                stroke-width="0.20"
                x1="19"
                y1="12"
                x2="19"
                [attr.y2]="23 + table.rows.length * 4"
              />
              <line
                stroke-width="0.20"
                x1="33"
                y1="12"
                x2="33"
                [attr.y2]="23 + table.rows.length * 4"
              />
              <line
                stroke-width="0.35"
                x1="59"
                y1="12"
                x2="59"
                [attr.y2]="23 + table.rows.length * 4"
              />
              <line
                stroke-width="0.20"
                x1="77"
                y1="17"
                x2="77"
                [attr.y2]="23 + table.rows.length * 4"
              />
              <line
                stroke-width="0.20"
                x1="95"
                y1="17"
                x2="95"
                [attr.y2]="23 + table.rows.length * 4"
              />
              <line
                stroke-width="0.35"
                x1="104"
                y1="12"
                x2="104"
                [attr.y2]="23 + table.rows.length * 4"
              />
              <line
                stroke-width="0.20"
                x1="122"
                y1="17"
                x2="122"
                [attr.y2]="23 + table.rows.length * 4"
              />
              <line
                stroke-width="0.20"
                x1="140"
                y1="17"
                x2="140"
                [attr.y2]="23 + table.rows.length * 4"
              />
            </g>
          </svg>
        </ng-container>
      </section>
    </ng-container>
    <!--
      <ng-container *ngFor="let page of groupe.serviceabilityShearForcePages">
        <section class="sheet">
          
          <svg
            width="150mm"
            height="260mm"
            viewBox="0 0 150 260"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            version="1.1"
          >
            
            <text x="0" y="11" font-size="2.3pt" text-anchor="start">
              耐久性　せん断ひび割れ検討判定用
            </text>

            
            <g fill="none" stroke="black">
              <line stroke-width="0.20" x1="7" y1="12" x2="7" y2="216" />
              <line stroke-width="0.20" x1="14" y1="12" x2="14" y2="216" />
              <line stroke-width="0.20" x1="28" y1="12" x2="28" y2="216" />
              <line stroke-width="0.20" x1="49" y1="22" x2="49" y2="216" />
              <line stroke-width="0.35" x1="59" y1="12" x2="59" y2="216" />
              <line stroke-width="0.20" x1="87" y1="17" x2="87" y2="216" />
              <line stroke-width="0.20" x1="113" y1="17" x2="113" y2="216" />
              <line stroke-width="0.20" x1="141" y1="17" x2="141" y2="216" />
            </g>

            
            <g font-size="2.3pt" text-anchor="middle">
              <text x="4" y="16">部材</text>
              <text x="4" y="20">番号</text>
              <text x="11" y="16">算出</text>
              <text x="11" y="20">番号</text>
              <text x="21" y="16">算出点</text>
              <text x="42" y="16">算 出 点 名</text>
              <text x="100" y="16">断面力</text>
              <text x="70" y="21">V</text>
              <text x="76" y="21">(kN)</text>
              <text x="95" y="21">M</text>
              <text x="103" y="21">(kN･m)</text>
              <text x="122" y="21">N</text>
              <text x="129" y="21">(kN)</text>
              <text x="145" y="21">comb</text>
            </g>
            <ng-container *ngFor="let line of page; index as i">
              
              <g fill="none" stroke="black">
                <line stroke-width="0.35" x1="0" y1="12" x2="150" y2="12" />
                <line stroke-width="0.20" x1="59" y1="17" x2="150" y2="17" />
                <line stroke-width="0.35" x1="0" y1="22" x2="150" y2="22" />
                <line stroke-width="0.20" x1="0" y1="34" x2="150" y2="34" />
              </g>
              
              <g font-size="2.3pt" text-anchor="middle">
                <text x="5" y="26">1</text>
                <text x="12" y="26">4</text>
                <text x="21" y="26">1.150</text>
                <text x="35" y="26">h/2</text>
                <text x="54" y="26">最大</text>
                <text x="78" y="26">930.32</text>
                <text x="102" y="26">-522.57</text>
                <text x="130" y="26">30.19</text>
                <text x="145" y="26">7</text>
                <text x="54" y="29.5">最小</text>
                <text x="78" y="29.5">534.23</text>
                <text x="102" y="29.5">-711.69</text>
                <text x="131" y="29.5">7.96</text>
                <text x="145" y="29.5">8</text>
                <text x="54" y="33">変動</text>
                <text x="78" y="33">372.93</text>
                <text x="103" y="33">303.75</text>
                <text x="130" y="33">16.39</text>
                <text x="145" y="33">9</text>
              </g>
            </ng-container>
          </svg>
        </section>
      </ng-container>

      <ng-container *ngFor="let page of groupe.safetyShearForce">
        <section class="sheet">
          
          <svg
            width="150mm"
            height="260mm"
            viewBox="0 0 150 260"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            version="1.1"
          >
            
            <text x="0" y="11" font-size="2.3pt" text-anchor="start">
              安全性（破壊）
            </text>
            
            <g font-size="2.3pt" text-anchor="middle">
              <text x="4" y="16">部材</text>
              <text x="4" y="20">番号</text>
              <text x="11" y="16">算出</text>
              <text x="11" y="20">番号</text>
              <text x="21" y="16">算出点</text>
              <text x="42" y="16">算 出 点 名</text>
              <text x="100" y="16">断面力</text>
              <text x="70" y="21">V</text>
              <text x="76" y="21">(kN)</text>
              <text x="95" y="21">M</text>
              <text x="103" y="21">(kN･m)</text>
              <text x="122" y="21">N</text>
              <text x="129" y="21">(kN)</text>
              <text x="145" y="21">comb</text>
            </g>

            
            <g fill="none" stroke="black">
              <line stroke-width="0.20" x1="7" y1="12" x2="7" y2="216" />
              <line stroke-width="0.20" x1="14" y1="12" x2="14" y2="216" />
              <line stroke-width="0.20" x1="28" y1="12" x2="28" y2="216" />
              <line stroke-width="0.35" x1="59" y1="12" x2="59" y2="216" />
              <line stroke-width="0.20" x1="87" y1="17" x2="87" y2="216" />
              <line stroke-width="0.20" x1="113" y1="17" x2="113" y2="216" />
              <line stroke-width="0.20" x1="141" y1="17" x2="141" y2="216" />
            </g>
            <ng-container *ngFor="let line of page; index as i">
              
              <g fill="none" stroke="black">
                <line stroke-width="0.35" x1="0" y1="12" x2="150" y2="12" />
                <line stroke-width="0.20" x1="59" y1="17" x2="150" y2="17" />
                <line stroke-width="0.35" x1="0" y1="22" x2="150" y2="22" />
                <line stroke-width="0.20" x1="0" y1="27" x2="150" y2="27" />
              </g>
              
              <g font-size="2.3pt" text-anchor="middle">
                <text x="5" y="26">1</text>
                <text x="12" y="26">4</text>
                <text x="21" y="26">1.150</text>
                <text x="35" y="26">h/2</text>
                <text x="78" y="26">1295.42</text>
                <text x="102" y="26">-763.62</text>
                <text x="130" y="26">26.20</text>
                <text x="145" y="26">1</text>
              </g>
            </ng-container>
          </svg>
        </section>
      </ng-container>
    -->
  </ng-container>
</ng-container>
