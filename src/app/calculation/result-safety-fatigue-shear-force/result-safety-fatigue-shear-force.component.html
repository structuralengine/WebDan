<div *ngIf="isLoading" class="spinner-border" style="width: 1rem; height: 1rem;" role="status">
  <span class="sr-only">Loading...</span>
</div>

<ng-container *ngIf="!isLoading">
  <ng-container *ngIf="isFulfilled">
    <!--  
    <section class="sheet">
    解説ページが入る
    </section>
    -->

    <ng-container *ngFor="let pages of safetyFatigueShearForcepages; index as i">
      <section class="sheet">
        <svg width="150mm" height="260mm" viewBox="0 0 150 260" xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">
          <!--タイトル-->
          <text x="0" y="11" font-size="2.5pt" text-anchor="start">{{pages.caption}} (その{{i+1}})</text>
          <!--横線-->
          <g fill="none" stroke="black">
            <line stroke-width="0.50" x1="0" y1="12" x2="150" y2="12" />
            <line stroke-width="0.25" x1="0" y1="16" x2="150" y2="16" />
            <line stroke-width="0.25" x1="0" y1="20" x2="150" y2="20" />
            <line stroke-width="0.50" x1="0" y1="24" x2="150" y2="24" />
            <line stroke-width="0.25" x1="0" y1="28" x2="150" y2="28" />
            <line stroke-width="0.25" x1="0" y1="32" x2="150" y2="32" />
            <line stroke-width="0.50" x1="0" y1="36" x2="150" y2="36" />
            <line stroke-width="0.25" x1="0" y1="44" x2="150" y2="44" />
            <line stroke-width="0.50" x1="0" y1="48" x2="150" y2="48" />
            <line stroke-width="0.25" x1="0" y1="52" x2="150" y2="52" />
            <line stroke-width="0.25" x1="0" y1="56" x2="150" y2="56" />
            <line stroke-width="0.25" x1="0" y1="60" x2="150" y2="60" />
            <line stroke-width="0.25" x1="0" y1="64" x2="150" y2="64" />
            <line stroke-width="0.25" x1="0" y1="68" x2="150" y2="68" />
            <line stroke-width="0.25" x1="0" y1="72" x2="150" y2="72" />
            <line stroke-width="0.50" x1="0" y1="76" x2="150" y2="76" />
            <line stroke-width="0.25" x1="0" y1="84" x2="150" y2="84" />
            <line stroke-width="0.25" x1="0" y1="88" x2="150" y2="88" />
            <line stroke-width="0.25" x1="0" y1="92" x2="150" y2="92" />
            <line stroke-width="0.50" x1="0" y1="96" x2="150" y2="96" />
            <line stroke-width="0.25" x1="0" y1="100" x2="150" y2="100" />
            <line stroke-width="0.25" x1="0" y1="104" x2="150" y2="104" />
            <line stroke-width="0.50" x1="0" y1="108" x2="150" y2="108" />
            <line stroke-width="0.25" x1="0" y1="112" x2="150" y2="112" />
            <line stroke-width="0.25" x1="0" y1="116" x2="150" y2="116" />
            <line stroke-width="0.50" x1="0" y1="120" x2="150" y2="120" />
            <line stroke-width="0.25" x1="0" y1="124" x2="150" y2="124" />
            <line stroke-width="0.25" x1="0" y1="128" x2="150" y2="128" />
            <line stroke-width="0.50" x1="0" y1="132" x2="150" y2="132" />
            <line stroke-width="0.25" x1="0" y1="136" x2="150" y2="136" />
            <line stroke-width="0.25" x1="0" y1="140" x2="150" y2="140" />
            <line stroke-width="0.50" x1="0" y1="144" x2="150" y2="144" />
            <line stroke-width="0.25" x1="0" y1="148" x2="150" y2="148" />
            <line stroke-width="0.25" x1="0" y1="152" x2="150" y2="152" />
            <line stroke-width="0.25" x1="0" y1="156" x2="150" y2="156" />
            <line stroke-width="0.25" x1="0" y1="160" x2="150" y2="160" />
            <line stroke-width="0.25" x1="0" y1="164" x2="150" y2="164" />
            <line stroke-width="0.25" x1="0" y1="168" x2="150" y2="168" />
            <line stroke-width="0.25" x1="0" y1="172" x2="150" y2="172" />
            <line stroke-width="0.25" x1="0" y1="176" x2="150" y2="176" />
            <line stroke-width="0.25" x1="0" y1="180" x2="150" y2="180" />
            <line stroke-width="0.25" x1="0" y1="184" x2="150" y2="184" />
            <line stroke-width="0.25" x1="0" y1="188" x2="150" y2="188" />
            <line stroke-width="0.25" x1="0" y1="192" x2="150" y2="192" />
            <line stroke-width="0.25" x1="0" y1="196" x2="150" y2="196" />
            <line stroke-width="0.25" x1="0" y1="200" x2="150" y2="200" />
            <line stroke-width="0.25" x1="0" y1="204" x2="150" y2="204" />
            <line stroke-width="0.50" x1="0" y1="208" x2="150" y2="208" />
            <line stroke-width="0.25" x1="0" y1="212" x2="150" y2="212" />
            <line stroke-width="0.50" x1="0" y1="216" x2="150" y2="216" />
          </g>
          <!--縦線-->
          <g fill="none" stroke="black">
            <line stroke-width="0.50" x1="30" y1="12" x2="30" y2="216" />
            <line stroke-width="0.25" x1="54" y1="12" x2="54" y2="216" />
            <line stroke-width="0.25" x1="78" y1="12" x2="78" y2="216" />
            <line stroke-width="0.25" x1="102" y1="12" x2="102" y2="216" />
            <line stroke-width="0.25" x1="126" y1="12" x2="126" y2="216" />
          </g>
          <!--Row Header-->
          <g font-size="2.5pt" text-anchor="middle">
            <text x="15" y="15">部材名称</text>
            <text x="15" y="19">位　　置</text>
            <text x="15" y="23">断面番号</text>

            <text x="8" y="27">B Bf</text><text x="20" y="27">(mm)</text>
            <text x="8" y="31">H Ht</text><text x="20" y="31">(mm)</text>
            <text x="15" y="35">tanθc+tanθt(mm)</text>

            <text x="8" y="39">Ast</text>
            <text x="20" y="39">
              (mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>
            <text x="15" y="43"></text>
            <text x="8" y="47">dast</text><text x="20" y="47">(mm)</text>

            <text x="8" y="51">f'ck</text>
            <text x="20" y="51">
              (N/mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>
            <text x="15" y="55">γc</text>
            <text x="8" y="59">f'cd</text>
            <text x="20" y="59">
              (N/mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>

            <text x="8" y="63">fsyk</text>
            <text x="20" y="63">
              (N/mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>
            <text x="15" y="67">γs</text>
            <text x="8" y="71">fsyd</text>
            <text x="20" y="71">
              (N/mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>
            <text x="8" y="75">fsuk</text>
            <text x="20" y="75">
              (N/mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>

            <text x="8" y="79">Aw Ab</text>
            <text x="20" y="79">
              (mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>
            <text x="8" y="83">fyd</text>
            <text x="20" y="83">
              (N/mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>
            <text x="8" y="87">θ</text><text x="20" y="87">(° )</text>
            <text x="8" y="91">S</text><text x="20" y="91">(mm)</text>

            <text x="8" y="95">Vpd</text><text x="20" y="95">(kN)</text>
            <text x="8" y="99">Mpd</text><text x="20" y="99">(kN)</text>
            <text x="8" y="103">N'pd</text><text x="20" y="103">(kN)</text>

            <text x="8" y="107">Vrd</text><text x="20" y="107">(kN)</text>
            <text x="8" y="111">Mrd</text><text x="20" y="111">(kN)</text>
            <text x="8" y="115">N'rd</text><text x="20" y="115">(kN)</text>

            <text x="8" y="119">fvcd</text>
            <text x="20" y="119">
              (N/mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>
            <text x="15" y="123">γbc</text>
            <text x="8" y="127">Vcd</text><text x="20" y="127">(kN)</text>

            <text x="15" y="131">Kr</text>
            <text x="8" y="135">σspd</text>
            <text x="20" y="135">
              (N/mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>
            <text x="8" y="139">σsrd</text>
            <text x="20" y="139">
              (N/mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>

            <text x="8" y="143">σ㏛</text>
            <text x="20" y="143">
              (N/mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>
            <text x="8" y="147">fsr200</text>
            <text x="20" y="147">
              (N/mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>
            <text x="8" y="151">γi・σsrd/(fsr200/γb)</text>
            <text x="15" y="155">Κ</text>
            <text x="15" y="159">鉄筋補正　αr</text>
            <text x="8" y="163">ΣＮ</text><text x="20" y="163">(回)</text>
            <text x="15" y="167">NA</text>
            <text x="15" y="171">NB</text>
            <text x="15" y="175">SA/SC</text>
            <text x="15" y="179">SB/SC</text>
            <text x="15" y="183">鉄筋加工補正 r1</text>
            <text x="15" y="187">鉄筋加工補正 r2</text>
            <text x="15" y="191">γs</text>
            <text x="8" y="195">fsrd</text>
            <text x="20" y="195">
              (N/mm<tspan baseline-shift="20%" font-size="1.7pt">2</tspan>)
            </text>
            <text x="15" y="199">γbs</text>
            <text x="15" y="203">γi</text>

            <text x="15" y="207">γi・σsrd/(fsrd/γb)</text>
            <text x="15" y="211">照査結果</text>
          </g>
          <!--calclate-->
          <g font-size="2.5pt">
            <ng-container *ngFor="let column of pages.columns; index as c">
              <ng-container *ngFor="let item of column; index as r">
                <ng-container *ngIf="item.value != ''">
                  <text *ngIf="item.alien == 'right'" text-anchor="end" [attr.x]="48+c*24"
                    [attr.y]="16+r*4">{{item.value}}</text>
                  <text *ngIf="item.alien == 'center'" text-anchor="middle" [attr.x]="42+c*24"
                    [attr.y]="16+r*4">{{item.value}}</text>
                </ng-container>
              </ng-container>
            </ng-container>
          </g>
        </svg>
      </section>
    </ng-container>

  </ng-container>
  <section *ngIf="err.length > 0" class="sheet">
      <p >{{err}}</p>
  </section>
</ng-container>