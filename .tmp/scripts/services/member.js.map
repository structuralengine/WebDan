{"version":3,"sources":["services/member.js"],"names":["angular","module","factory","webdanRef","$firebaseArray","$firebaseObject","$firebaseUtils","ref","child","members","Member","selectOptions","query","copy","remove","member","origMember","$getRecord","$id","$remove","catch","err","save","plainMember","toJSON","extend","$save","add","$add","isEmpty","g_no","trim","g_name","forEach","renderName","instance","td","row","col","prop","memberId","cellProperties","renderProp","renderNo","element","html"],"mappings":"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","file":"member.js","sourcesContent":["'use strict';\r\n\r\n/**\r\n * @ngdoc service\r\n * @name webdan.Member\r\n * @description\r\n * # Member\r\n * Factory in the webdan.\r\n */\r\nangular.module('webdan')\r\n  .factory('Member', ['webdanRef', '$firebaseArray', '$firebaseObject', '$firebaseUtils',\r\n    function(webdanRef, $firebaseArray, $firebaseObject, $firebaseUtils) {\r\n\r\n      let ref = webdanRef.child('members');\r\n      let members = $firebaseArray(ref);\r\n      let Member = {};\r\n      let selectOptions;\r\n\r\n      Member.query = function(copy) {\r\n        return members;\r\n      }\r\n\r\n      Member.remove = function(member) {\r\n        let origMember = members.$getRecord(member.$id);\r\n        return members.$remove(origMember).catch(function(err) {\r\n          throw err;\r\n        });\r\n      }\r\n\r\n      Member.save = function(member) {\r\n        let origMember = members.$getRecord(member.$id);\r\n        let plainMember = $firebaseUtils.toJSON(member);\r\n        angular.extend(origMember, plainMember);\r\n        return members.$save(origMember).catch(function(err) {\r\n          throw err;\r\n        });\r\n      }\r\n\r\n      Member.add = function(member) {\r\n        return members.$add(member).catch(function(err) {\r\n          throw err;\r\n        });\r\n      }\r\n\r\n      Member.isEmpty = function(member) {\r\n        return !member.g_no.trim() && !member.g_name.trim();\r\n      }\r\n\r\n      Member.selectOptions = function() {\r\n        if (!selectOptions) {\r\n          selectOptions = {};\r\n          members.forEach(function(member) {\r\n            selectOptions[member.$id] = member.g_name;\r\n          });\r\n        }\r\n        return selectOptions;\r\n      }\r\n\r\n      Member.renderName = function(instance, td, row, col, prop, memberId, cellProperties) {\r\n        return renderProp(td, memberId, 'g_name');\r\n      }\r\n\r\n      Member.renderNo = function(instance, td, row, col, prop, memberId, cellProperties) {\r\n        return renderProp(td, memberId, 'g_no');\r\n      }\r\n\r\n      function renderProp(td, memberId, prop) {\r\n        let member = members.$getRecord(memberId);\r\n        if (member) {\r\n          angular.element(td).html(member[prop] || '');\r\n        }\r\n        return td;\r\n      }\r\n\r\n      return Member;\r\n    }\r\n  ]);\r\n"]}