{"version":3,"sources":["services/page.js"],"names":["angular","module","factory","webdanRef","$firebaseArray","ref","child","pages","Page","validators","query","add","page","$add","then","$id","key","catch","err","update","prop","val","$getRecord","$save"],"mappings":"AAAA;;AAEA;;;;;;;;AAOAA,QAAQC,MAAR,CAAe,QAAf,EACGC,OADH,CACW,MADX,EACmB,CAAC,WAAD,EAAc,gBAAd,EACf,UAASC,SAAT,EAAoBC,cAApB,EAAoC;;AAElC,MAAIC,MAAMF,UAAUG,KAAV,CAAgB,OAAhB,CAAV;AACA,MAAIC,QAAQH,eAAeC,GAAf,CAAZ;AACA,MAAIG,OAAO,EAAX;;AAEAA,OAAKC,UAAL,GAAkB;AAChB,UAAM,IADU;AAEhB,UAAM;AAFU,GAAlB;;AAKAD,OAAKE,KAAL,GAAa,YAAW;AACtB,WAAOH,KAAP;AACD,GAFD;;AAIAC,OAAKG,GAAL,GAAW,UAASC,IAAT,EAAe;AACxB,WAAOL,MAAMM,IAAN,CAAWD,IAAX,EACJE,IADI,CACC,UAAST,GAAT,EAAc;AAClBO,WAAKG,GAAL,GAAWV,IAAIW,GAAf;AACD,KAHI,EAIJC,KAJI,CAIE,UAASC,GAAT,EAAc;AACnB,YAAMA,GAAN;AACD,KANI,CAAP;AAOD,GARD;;AAUAV,OAAKW,MAAL,GAAc,UAASH,GAAT,EAAcI,IAAd,EAAoBC,GAApB,EAAyB;AACrC,QAAIT,OAAOL,MAAMe,UAAN,CAAiBN,GAAjB,CAAX;AACAJ,SAAKQ,IAAL,IAAaC,GAAb;AACA,WAAOd,MAAMgB,KAAN,CAAYX,IAAZ,EAAkBK,KAAlB,CAAwB,UAASC,GAAT,EAAc;AAC3C,YAAMA,GAAN;AACD,KAFM,CAAP;AAGD,GAND;;AAQA,SAAOV,IAAP;AACD,CAnCc,CADnB","file":"page.js","sourcesContent":["'use strict';\r\n\r\n/**\r\n * @ngdoc service\r\n * @name webdan.Page\r\n * @description\r\n * # Page\r\n * Factory in the webdan.\r\n */\r\nangular.module('webdan')\r\n  .factory('Page', ['webdanRef', '$firebaseArray',\r\n    function(webdanRef, $firebaseArray) {\r\n\r\n      let ref = webdanRef.child('pages');\r\n      let pages = $firebaseArray(ref);\r\n      let Page = {};\r\n\r\n      Page.validators = {\r\n        'ja': /.+/,\r\n        'en': /[A-Za-z0-9\\s]*/,\r\n      };\r\n\r\n      Page.query = function() {\r\n        return pages;\r\n      }\r\n\r\n      Page.add = function(page) {\r\n        return pages.$add(page)\r\n          .then(function(ref) {\r\n            page.$id = ref.key;\r\n          })\r\n          .catch(function(err) {\r\n            throw err;\r\n          });\r\n      }\r\n\r\n      Page.update = function(key, prop, val) {\r\n        let page = pages.$getRecord(key);\r\n        page[prop] = val;\r\n        return pages.$save(page).catch(function(err) {\r\n          throw err;\r\n        });\r\n      }\r\n\r\n      return Page;\r\n    }\r\n  ]);\r\n"]}