{"version":3,"sources":["services/member-section.js"],"names":["angular","module","factory","webdanRef","$firebaseArray","$firebaseObject","$firebaseUtils","ref","child","memberSections","MemberSection","query","remove","memberSection","origMemberSection","$getRecord","$id","$remove","catch","err","save","plainMemberSection","toJSON","extend","$save","add","$add","isEmpty","g_no","g_name","selectOptions","forEach","name","renderName","instance","td","row","col","prop","memberSectionId","cellProperties","renderProp","element","html"],"mappings":"AAAA;;AAEA;;;;;;;;AAOAA,QAAQC,MAAR,CAAe,QAAf,EACGC,OADH,CACW,eADX,EAC4B,CAAC,WAAD,EAAc,gBAAd,EAAgC,iBAAhC,EAAmD,gBAAnD,EACxB,UAASC,SAAT,EAAoBC,cAApB,EAAoCC,eAApC,EAAqDC,cAArD,EAAqE;;AAEnE,MAAIC,MAAMJ,UAAUK,KAAV,CAAgB,gBAAhB,CAAV;AACA,MAAIC,iBAAiBL,eAAeG,GAAf,CAArB;AACA,MAAIG,gBAAgB,EAApB;;AAEAA,gBAAcC,KAAd,GAAsB,YAAW;AAC/B,WAAOF,cAAP;AACD,GAFD;;AAIAC,gBAAcE,MAAd,GAAuB,UAASC,aAAT,EAAwB;AAC7C,QAAIC,oBAAoBL,eAAeM,UAAf,CAA0BF,cAAcG,GAAxC,CAAxB;AACA,WAAOP,eAAeQ,OAAf,CAAuBH,iBAAvB,EAA0CI,KAA1C,CAAgD,UAASC,GAAT,EAAc;AACnE,YAAMA,GAAN;AACD,KAFM,CAAP;AAGD,GALD;;AAOAT,gBAAcU,IAAd,GAAqB,UAASP,aAAT,EAAwB;AAC3C,QAAIC,oBAAoBL,eAAeM,UAAf,CAA0BF,cAAcG,GAAxC,CAAxB;AACA,QAAIK,qBAAqBf,eAAegB,MAAf,CAAsBT,aAAtB,CAAzB;AACAb,YAAQuB,MAAR,CAAeT,iBAAf,EAAkCO,kBAAlC;AACA,WAAOZ,eAAee,KAAf,CAAqBV,iBAArB,EAAwCI,KAAxC,CAA8C,UAASC,GAAT,EAAc;AACjE,YAAMA,GAAN;AACD,KAFM,CAAP;AAGD,GAPD;;AASAT,gBAAce,GAAd,GAAoB,UAASZ,aAAT,EAAwB;AAC1C,WAAOJ,eAAeiB,IAAf,CAAoBb,aAApB,EAAmCK,KAAnC,CAAyC,UAASC,GAAT,EAAc;AAC5D,YAAMA,GAAN;AACD,KAFM,CAAP;AAGD,GAJD;;AAMAT,gBAAciB,OAAd,GAAwB,UAASd,aAAT,EAAwB;AAC9C,WAAO,CAACA,cAAce,IAAf,IAAuB,CAACf,cAAcgB,MAA7C;AACD,GAFD;;AAIAnB,gBAAcoB,aAAd,GAA8B,YAAW;AACvC,QAAI,CAACA,aAAL,EAAoB;AAClBA,sBAAgB,EAAhB;AACArB,qBAAesB,OAAf,CAAuB,UAASlB,aAAT,EAAwB;AAC7CiB,sBAAcjB,cAAcG,GAA5B,IAAmCH,cAAcmB,IAAjD;AACD,OAFD;AAGD;AACD,WAAOF,aAAP;AACD,GARD;;AAUApB,gBAAcuB,UAAd,GAA2B,UAASC,QAAT,EAAmBC,EAAnB,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiCC,IAAjC,EAAuCC,eAAvC,EAAwDC,cAAxD,EAAwE;AACjG,WAAOC,WAAWN,EAAX,EAAeI,eAAf,EAAgC,MAAhC,CAAP;AACD,GAFD;;AAIA,WAASE,UAAT,CAAoBN,EAApB,EAAwBI,eAAxB,EAAyCD,IAAzC,EAA+C;AAC7C,QAAIzB,gBAAgBJ,eAAeM,UAAf,CAA0BwB,eAA1B,CAApB;AACA,QAAI1B,aAAJ,EAAmB;AACjBb,cAAQ0C,OAAR,CAAgBP,EAAhB,EAAoBQ,IAApB,CAAyB9B,cAAcyB,IAAd,KAAuB,EAAhD;AACD;AACD,WAAOH,EAAP;AACD;;AAED,SAAOzB,aAAP;AACD,CA5DuB,CAD5B","file":"member-section.js","sourcesContent":["'use strict';\r\n\r\n/**\r\n * @ngdoc service\r\n * @name webdan.MemberSection\r\n * @description\r\n * # MemberSection\r\n * Factory in the webdan.\r\n */\r\nangular.module('webdan')\r\n  .factory('MemberSection', ['webdanRef', '$firebaseArray', '$firebaseObject', '$firebaseUtils',\r\n    function(webdanRef, $firebaseArray, $firebaseObject, $firebaseUtils) {\r\n\r\n      var ref = webdanRef.child('memberSections');\r\n      var memberSections = $firebaseArray(ref);\r\n      var MemberSection = {};\r\n\r\n      MemberSection.query = function() {\r\n        return memberSections;\r\n      }\r\n\r\n      MemberSection.remove = function(memberSection) {\r\n        let origMemberSection = memberSections.$getRecord(memberSection.$id);\r\n        return memberSections.$remove(origMemberSection).catch(function(err) {\r\n          throw err;\r\n        });\r\n      }\r\n\r\n      MemberSection.save = function(memberSection) {\r\n        let origMemberSection = memberSections.$getRecord(memberSection.$id);\r\n        let plainMemberSection = $firebaseUtils.toJSON(memberSection);\r\n        angular.extend(origMemberSection, plainMemberSection);\r\n        return memberSections.$save(origMemberSection).catch(function(err) {\r\n          throw err;\r\n        });\r\n      }\r\n\r\n      MemberSection.add = function(memberSection) {\r\n        return memberSections.$add(memberSection).catch(function(err) {\r\n          throw err;\r\n        });\r\n      }\r\n\r\n      MemberSection.isEmpty = function(memberSection) {\r\n        return !memberSection.g_no && !memberSection.g_name;\r\n      }\r\n\r\n      MemberSection.selectOptions = function() {\r\n        if (!selectOptions) {\r\n          selectOptions = {};\r\n          memberSections.forEach(function(memberSection) {\r\n            selectOptions[memberSection.$id] = memberSection.name;\r\n          });\r\n        }\r\n        return selectOptions;\r\n      }\r\n\r\n      MemberSection.renderName = function(instance, td, row, col, prop, memberSectionId, cellProperties) {\r\n        return renderProp(td, memberSectionId, 'name');\r\n      }\r\n\r\n      function renderProp(td, memberSectionId, prop) {\r\n        let memberSection = memberSections.$getRecord(memberSectionId);\r\n        if (memberSection) {\r\n          angular.element(td).html(memberSection[prop] || '');\r\n        }\r\n        return td;\r\n      }\r\n\r\n      return MemberSection;\r\n    }\r\n  ]);\r\n"]}