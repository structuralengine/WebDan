"use strict";angular.module("webdan",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","firebase.ref.app","firebase.auth.app","angularMoment","ngHandsontable","local-db","ht-utils","ui.bootstrap"]).config(["dbConfig","appConfig",function(e,n){angular.extend(e,n.db)}]),angular.module("webdan").config(["$routeProvider","SECURED_ROUTES",function(e,n){e.whenAuthenticated=function(t,a){return a.resolve=a.resolve||{},a.resolve.user=["Auth",function(e){return e.$requireSignIn()}],e.when(t,a),n[t]=!0,e}}]).config(["$routeProvider",function(e){e.when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).whenAuthenticated("/account",{templateUrl:"views/account.html",controller:"AccountCtrl"}).whenAuthenticated("/main",{templateUrl:"views/main.html",controller:"MainCtrl"}).whenAuthenticated("/basic-information",{templateUrl:"views/basic-information.html",controller:"BasicInformationCtrl",controllerAs:"ctrl"}).whenAuthenticated("/material-strength-rests",{templateUrl:"views/material-strength-rests.html",controller:"MaterialStrengthRestsCtrl",controllerAs:"ctrl"}).whenAuthenticated("/calculation-print",{templateUrl:"views/calculation-print.html",controller:"CalculationPrintCtrl",controllerAs:"ctrl"}).whenAuthenticated("/",{templateUrl:"views/members.html",controller:"MembersCtrl",controllerAs:"ctrl"}).whenAuthenticated("/design-points",{templateUrl:"views/design-points.html",controller:"DesignPointsCtrl",controllerAs:"ctrl"}).whenAuthenticated("/design-points/defaults",{templateUrl:"views/design-points/defaults.html",controller:"DesignPointsDefaultsCtrl"}).whenAuthenticated("/bars",{templateUrl:"views/bars.html",controller:"BarsCtrl",controllerAs:"ctrl"}).whenAuthenticated("/fatigues",{templateUrl:"views/fatigues.html",controller:"FatiguesCtrl",controllerAs:"ctrl"}).whenAuthenticated("/bending-moments",{templateUrl:"views/bending-moments.html",controller:"BendingMomentsCtrl",controllerAs:"ctrl"}).whenAuthenticated("/shears",{templateUrl:"views/shears.html",controller:"ShearsCtrl",controllerAs:"ctrl"}).whenAuthenticated("/safety-factors",{templateUrl:"views/safety-factors.html",controller:"SafetyFactorsCtrl",controllerAs:"ctrl"}).whenAuthenticated("/material-strengths",{templateUrl:"views/material-strengths.html",controller:"MaterialStrengthsCtrl",controllerAs:"ctrl"}).whenAuthenticated("/safety-factors-material-strengths",{templateUrl:"views/safety-factors-material-strengths.html",controller:"SafetyFactorsMaterialStrengthsCtrl",controllerAs:"ctrl"}).whenAuthenticated("/section-forces",{templateUrl:"views/section-forces.html",controller:"SectionForcesCtrl",controllerAs:"ctrl"}).whenAuthenticated("/calc",{templateUrl:"views/calc.html",controller:"CalcCtrl",controllerAs:"ctrl"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location","Auth","SECURED_ROUTES","loginRedirectPath",function(e,n,t,a,r){function o(e){!e&&i(n.path())&&n.path(r)}function i(e){return a.hasOwnProperty(e)}t.$onAuthStateChanged(o),e.$on("$routeChangeError",function(e,t,a,o){"AUTH_REQUIRED"===o&&n.path(r)})}]).constant("SECURED_ROUTES",{}),function(){angular.module("firebase.auth.app",["firebase"]).factory("Auth",["$firebaseAuth",function(e){return e()}])}();var config={apiKey:"AIzaSyC0nZsDxgRm9S1ppN_mx0nWcrgL1FF5GFI",authDomain:"webdan-abcc6.firebaseapp.com",databaseURL:"https://webdan-abcc6.firebaseio.com",projectId:"webdan-abcc6",storageBucket:"webdan-abcc6.appspot.com",messagingSenderId:"1006569190487"};firebase.initializeApp(config),angular.module("firebase.config",[]).constant("FBURL","https://webdan-abcc6.firebaseio.com").constant("SIMPLE_LOGIN_PROVIDERS",["google"]).constant("loginRedirectPath","/login"),angular.module("firebase.ref.app",["firebase"]).factory("Ref",["$window",function(e){return(new e.firebase.database).ref()}]),angular.module("webdan").factory("webdanRef",["Ref",function(e){return e.child("webdan")}]),angular.module("webdan").constant("appConfig",{db:{source:"webdan.2",defaults:{basicInformation:{},groups:[],members:[],designPoints:[],bars:[],fatigues:[],bendingMoments:[],shears:[],safetyFactors:[],materialStrengths:[],materialStrengthRests:[],calculationPrint:{}}},CalculationPrint:{calculatePage:"calculate.aspx",server:{url:"http://www.structuralengine.com/RCNonlinear/api/values"}}}),angular.module("webdan").factory("barConfig",["$injector","rebarSideBarDefaults",function(e,n){return{"部材番号":{en:"member no",var:"m_no",column:{data:"designPointId",path:"Member.m_no",readOnly:!0},items:{"":{items:{"":{}}}}},"算出点名":{en:"design point",var:"p_name",column:{data:"designPointId",path:"p_name",readOnly:!0},items:{"":{items:{"":{}}}}},"断面":{en:"section",var:"B,H",items:{B:{items:{H:{}}}},column:{data:"designPointId",type:"numeric",readOnly:!0,renderer:function(n,t,a,r,o,i,s){Handsontable.renderers.BaseRenderer.apply(this,arguments);var u="",l=n.getSourceDataAtRow(a);if(l){var c=e.get("DesignPoint"),m=c.getAsc(l.designPointId);u=a%2==0?m.Member.B:m.Member.H}return angular.element(t).html(u).addClass("htNumeric htRight"),t}}},"ハンチ高":{en:"haunch height",var:"dH",column:{data:"haunch_height",type:"numeric"},items:{"曲げ":{var:"dH_m",items:{"せん断":{var:"dH_s"}}}}},"位置":{en:"position",var:"rebar_side",items:{"":{items:{"":{}}}},values:n,column:function(e){return{data:"rebar_side",type:"numeric",readOnly:!0,renderer:function(n,t,a,r,o,i,s){Handsontable.renderers.BaseRenderer.apply(this,arguments);var u=e[i]||i;return angular.element(t).html(u),t}}}(n)},"軸方向鉄筋":{en:"longitudinal rebar",var:"",items:{"鉄筋径":{en:"Diameter of longitudinal rebar",var:"rebar_01",items:{"":{column:{data:"rebar_01",type:"numeric"}}}},"本数":{en:"Numbers of longitudinal rebar",var:"rebar_02",items:{"":{column:{data:"rebar_02",type:"numeric"}}}},"一段目カブリ":{en:"Cover of rebar",var:"rebar_03",items:{"":{column:{data:"rebar_03",type:"numeric",format:"0.0"}}}},"並び数":{en:"Number per row",var:"rebar_04",items:{"":{column:{data:"rebar_04",type:"numeric",format:"0.00"}}}},"アキ":{en:"interval",var:"rebar_05",items:{"":{column:{data:"rebar_05",type:"numeric"}}}},"間隔":{en:"Spacing of longitudinal rebar",var:"rebar_06",items:{"":{column:{data:"rebar_06",type:"numeric",format:"0.0"}}}}}},"側方鉄筋":{en:"Side rebar",var:"",items:{"鉄筋径":{en:"Diameter of Side rebar",var:"sidebar_01",items:{"":{column:{data:"sidebar_01",type:"numeric"}}}},"本数片":{en:"Numbers of Side rebar",var:"sidebar_02",items:{"":{column:{data:"sidebar_02",type:"numeric"}}}},"上端位置/ピッチ":{en:"depth per interval",var:"sidebar_03",items:{"":{column:{data:"sidebar_03",type:"numeric"}}}}}},"スターラップ":{en:"hoop tie",var:"",items:{"鉄筋径":{en:"Diameter of hoop tie",var:"hoop_01",items:{"":{column:{data:"hoop_01",type:"numeric"}}}},"組数":{en:"Numbers of hoop tie",var:"hoop_02",items:{"":{column:{data:"hoop_02",type:"numeric",format:"0.000"}}}},"間隔":{en:"Spacing of hoop tie",var:"hoop_03",items:{"":{column:{data:"hoop_03",type:"numeric"}}}}}},"主筋の斜率":{en:"Angle of longitudinal rebar",var:"rebar_07",items:{"":{items:{"":{column:{data:"rebar_07",type:"numeric",format:"0.000"}}}}}},"tan&gamma; + tan&beta;":{en:"tanγ+tanβ",var:"rebar_08",items:{"":{items:{"":{column:{data:"rebar_08",type:"numeric"}}}}}},"折曲げ鉄筋":{en:"bent up bar",var:"",items:{"鉄筋径":{en:"Diameter of bent up bar",var:"bent_01",items:{"":{column:{data:"bent_01",type:"numeric"}}}},"本数":{en:"Numbers of bent up bar",var:"bent_02",items:{"":{column:{data:"bent_02",type:"numeric"}}}},"間隔":{en:"Spacing of bent up bar",var:"bent_03",items:{"":{column:{data:"bent_03",type:"numeric"}}}},"角度":{en:"Angle of bent up bar",var:"bent_04",items:{"":{column:{data:"bent_04",type:"numeric"}}}}}},"処理":{en:"processing",var:"flg_enable",items:{"":{items:{"":{column:{data:"flg_enable",type:"checkbox"}}}}}}}}]),angular.module("webdan").constant("basicInformationConfig",{"pickup.moment":{"ピックアップ (曲げ耐力用)":{"耐久性 縁引張応力度検討用":{en:"for examination of tensile extreme fiber stress intensity",column:{data:"pik_m10",type:"numeric"}},"耐久性 鉄筋応力度検討用":{en:"for examination on stress intensity of reinforcing bar",column:{data:"pik_m11",type:"numeric"}},"耐久性 (永久荷重)":{en:"Check of durability(Permanent Load)",column:{data:"pik_m12",type:"numeric"}},"耐久性 (変動荷重)":{en:"Check of durability(Variable Load)",column:{data:"pik_m13",type:"numeric"}},"使用性 (外観ひび割れ)":{en:"Check for serviceability(visible crack)",column:{data:"pik_m14",type:"numeric"}},"安全性 (疲労破壊) 最小応力":{en:"Failure by fatigue(Min Stress)",column:{data:"pik_m20",type:"numeric"}},"安全性 (疲労破壊) 最大応力":{en:"Failure by fatigue(Max Stress)",column:{data:"pik_m21",type:"numeric"}},"安全性 (破壊)":{en:"ultimate limit state",column:{data:"pik_m30",type:"numeric"}},"復旧性 (損傷 地震時以外)":{en:"Restorability (usual)",column:{data:"pik_m40",type:"numeric"}},"復旧性 (損傷 地震時)":{en:"Restorability (Seismic)",column:{data:"pik_m41",type:"numeric"}}}},"pickup.shearforce":{"ピックアップ (せん断耐力用)":{"耐久性 せん断ひび割れ検討判定用":{en:"Determine whether checking of shear crack can be omitted",column:{data:"pik_s10",type:"numeric"}},"耐久性 (永久荷重)":{en:"Check of durability(Permanent Load)",column:{data:"pik_s11",type:"numeric"}},"耐久性 (変動荷重)":{en:"Check of durability(Variable Load)",column:{data:"pik_s12",type:"numeric"}},"安全性 (疲労破壊) 最小応力":{en:"Failure by fatigue(Min Stress)",column:{data:"pik_s20",type:"numeric"}},"安全性 (疲労破壊) 最大応力":{en:"Failure by fatigue(Max Stress)",column:{data:"pik_s21",type:"numeric"}},"安全性 (破壊)":{en:"ultimate limit state",column:{data:"pik_s30",type:"numeric"}},"復旧性 (損傷 地震時以外)":{en:"Restorability (usual)",column:{data:"pik_s40",type:"numeric"}},"復旧性 (損傷 地震時)":{en:"Restorability (Seismic)",column:{data:"pik_s41",type:"numeric"}}}},buttons:{"ボタン":{"標準の見出し":{en:"Standard heading",var:"pik_title"},"テンプレート読み込み":{en:"Load template",var:"load_temp"},"テンプレート保存":{en:"Save template",var:"save_temp"},"PickUp File (.pik) を開く":{en:"Open PickUp File(.pik)",var:"open_pik"},"PickUp.dat 読み込み":{en:"Open PickUp File(.dat)",var:"open_dat"}}},specification:{"仕様":{type:"radio",var:"spec",en:"specification",options:{jr:{en:"JR companies",ja:"JR 各社"},jrtt:{en:"japan railway construction transport and technology agency",ja:"鉄道・運輸機構"},jrc:{en:"East Japan Railway Company",ja:"JR 東日本"},jes:{en:"Jointed Element Structure",ja:"JES 工法"}}},"抗土圧構造モード":{type:"checkbox",var:"con_12",en:"EARTH STRUCTURE"}},limit:{"使用性 (外観) ひび割れ幅":{type:"number",var:"limit_m05",label:"制限値",postfix:"mm"}},axial:{"水平部材の軸方向力":{en:"The axial force of the horizontal member",type:"radio",var:"axial",options:{axial_01:{en:"consider",ja:"考慮する",optionals:{"軸力 最大最小についても照査する":{en:"Also check the maximum axial force",type:"checkbox",var:"axial_04"}}},axial_02:{en:"doesn't consider",ja:"考慮しない"},axial_03:{en:"Consider only tensile stress",ja:"引張 (マイナス) のみ考慮"}}}},rebar:{"引張鉄筋の着目位置":{en:"calculation point of tensile bar",type:"radio",var:"rebar",options:{rebar_01:{en:"Centroid",ja:"重心位置で計算"},rebar_02:{en:"first stage rebar for the design of width of crack",ja:"ひび割れ計算のみ 1段目鉄筋"},rebar_03:{en:"first stage rebar",ja:"全ての計算を 1段目鉄筋"}}}},conditions:{"条件":{"縁応力度が制限値以内の時でもひび割れ幅を計算する":{en:"Even when the Extreme fiber stress is within the limit value,  check of width of crack",var:"con_01"},"ひび割れ幅制限値に用いるかぶりは 100mm を上限とする":{en:"The cover of the reinforcing bars is limited to 100 mm for check of crack",var:"con_02"},"T 形断面でフランジ側引張は矩形断面で計算する":{en:"Calculate with T-shaped cross section with flange side tension as rectangular cross section",var:"con_03"},"円形断面で鉄筋を頂点に 1 本配置する":{en:"Place one reinforcing bar at the apex in circular cross section",var:"con_04"},"柱・杭の軸方向圧縮耐力 N'<sub>oud</sub> を計算する (部材係数 &gamma;<sub>b</sub>=1.3)":{en:"Calculate the axial compressive strength N'oud of pillars / piles (member factor γb = 1.3)",var:"con_05"},"耐久性のせん断ひび割れの検討で V<sub>d</sub> &lt; 0.7 &sdot; V<sub>cd</sub> でも省略しない":{en:"In the study of durability shear crack, Vd &lt; 0.7 * Vcd is not omitted",var:"con_06"},"&sigma;<sub>c</sub> &le; 0.4 &sdot; f<sub>cd</sub> の検討を行わない":{en:"Do not consider σc <= 0.4 * fcd",var:"con_07"},"せん断耐力: &beta;<sub>n</sub> の算定に用いる M<sub>ud</sub> は軸力を考慮しない":{en:"Shear strength: Mud used for calculation of βn does not consider axial force",var:"con_08"}}},fatigueData:{"疲労データ":{"変動応力は圧縮応力を考慮する (圧縮応力～引張応力の応力振幅)。チェックなしは、圧縮応力は 0 として応力振幅とする":{en:"Variable stress takes compressive stress into consideration (compressive stress ~ stress amplitude of tensile stress). Without check, compressive stress is set to 0 and it is set as stress amplitude",type:"checkbox",var:"con_09"},"変動応力度は最小応力と最大応力を用いた鉄筋応力度の差とする。チェックなしは、変動応力を用いた応力度を変動応力度とする。":{en:"The fluctuating stress degree is the difference of the stress level of the rebar with the minimum stress and the maximum stress. Without checking, the degree of stress using variable stress is taken as the variable stress level.",type:"checkbox",var:"con_10"}}},N:{"疲労寿命":{en:"fatigue life",type:"number",var:"N",postfix:"&times;10<sup>6</sup> 回"}},T:{"設計耐用年数":{en:"design service life",var:"T",postfix:"年"}},trains:{"1日当たり列車本数":{"j<sub>A</sub>":{type:"number",var:"jA",postfix:"本/日"},"j<sub>B</sub>":{type:"number",var:"jB",postfix:"本/日"}}}}),angular.module("webdan").factory("bendingMomentConfig",["$injector","HtHelper",function(e,n){return function(){return{"部材番号":{en:"",var:"",column:{data:"designPointId",path:"Member.m_no",type:"numeric",readOnly:!0},items:{"":{items:{"":{}}}}},"部材名":{en:"",var:"",column:{data:"designPointId",path:"Member.g_name",readOnly:!0},items:{"":{items:{"":{}}}}},"算出点名":{en:"",var:"",column:{data:"designPointId",path:"p_name",type:"text",renderer:n.getEditableForeignValueRenderer("DesignPoint","p_name")},items:{"":{items:{"":{}}}}},"耐久性・使用性":{en:"for examination",var:"case_10",items:{"縁応力<span class='break'></span>検討用":{en:"for examination of tensile extreme fiber stress intensity",var:"pik_10",items:{"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_10.pik_10.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_10.pik_10.Nd",type:"numeric",format:"0.00"}}}},"鉄筋応力度<span class='break'></span>検討用":{en:"for examination on stress intensity of reinforcing bar",var:"pik_11",items:{"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_10.pik_11.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_10.pik_11.Nd",type:"numeric",format:"0.00"}}}},"耐久性検討用<span class='break'></span>(永久)":{en:"Check of durability (Permanent Load)",var:"pik_12",items:{"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_10.pik_12.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_10.pik_12.Nd",type:"numeric",format:"0.00"}}}},"耐久性検討用<span class='break'></span>(変動)":{en:"Check of durability (Variable Load)",var:"pik_13",items:{"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_10.pik_13.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_10.pik_13.Nd",type:"numeric",format:"0.00"}}}},"外観検討用":{en:"Check for serviceability (visible crack)",var:"pik_14",items:{"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_10.pik_14.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_10.pik_14.Nd",type:"numeric",format:"0.00"}}}}}},"疲労":{en:"Failure by fatigue",var:"case_20",items:{"最小応力":{en:"Failure by fatigue (Min Stress)",var:"pik_20",items:{"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_20.pik_20.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_20.pik_20.Nd",type:"numeric",format:"0.00"}}}},"最大応力":{en:"Failure by fatigue (Max Stress)",var:"pik_21",items:{"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_20.pik_21.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_20.pik_21.Nd",type:"numeric",format:"0.00"}}}}}},"破壊":{en:"ultimate limit state",var:"case_30",items:{"設計断面力":{en:"ultimate limit state",var:"pik_30",items:{"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_30.pik_30.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_30.pik_30.Nd",type:"numeric",format:"0.00"}}}},"軸力最大":{en:"N_max",items:{"N<sub>max</sub>":{en:"(dummey)",column:{data:"case_30.pik_31",type:"numeric",format:"0.00"}}}}}},"復旧性":{en:"Restorability",var:"case_40",items:{"復旧<span class='break'></span>地震時以外":{en:"usual",items:{"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_40.usual.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_40.usual.Nd",type:"numeric",format:"0.00"}}}},"復旧<span class='break'></span>地震時":{en:"Seismic",var:"pik_41",items:{"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_40.pik_41.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_40.pik_41.Nd",type:"numeric",format:"0.00"}}}}}}}}()}]),angular.module("webdan").constant("calculationPrintConfig",{content:{"計算・出力内容":{"基本データ":{en:"",var:"calc_01"},"安全係数・材料強度":{en:"",var:"calc_02"},"断面力の集計表":{en:"",var:"calc_03"},"性能照査":{en:"",var:"calc_04"},"必要鉄筋量":{en:"",var:"calc_05"}}},check:{"照査":{"曲げ":{en:"",var:"calc_m"},"せん断":{en:"",var:"calc_s"}}},calc_target:{"部材":{en:"",var:"calc_target"}},print:{"処理":{"すべて出力":{en:"",var:"print_all"},"マークのみ出力":{en:"",var:"print_checked"},"マーク以外出力":{en:"",var:"print_unchecked"}}},preview:{"画面表示後に印刷":{en:"",var:"print_preview"}}}),angular.module("webdan").factory("designPointConfig",["htSpeedInput","designPointNameDefaults",function(e,n){return{"部材番号":{items:{"":{column:{data:"m_no",type:"numeric",readOnly:!0}}}},"算出点":{en:"Point",items:{"":{column:{data:"p_id",type:"text",readOnly:!0}}}},"位置":{en:"Location",items:{"":{column:{data:"p_pos",type:"numeric",format:"0.000",readOnly:!0}}}},"算出点名":{en:"Point Name",items:{"":{column:{data:"p_name",type:"text",renderer:e.getRenderer(n,!0)}}}},"安全度照査":{en:"Design Forces",items:{"曲げ":{en:"Bending Moment",column:{data:"dm",type:"checkbox"}},"せん断":{en:"Shear Force",column:{data:"ds",type:"checkbox"}}}},"総括表用":{en:"Calculation Results of Member Forces",items:{"曲げ":{en:"Bending Moment",column:{data:"rm",type:"checkbox"}},"せん断":{en:"Shear Force",column:{data:"rs",type:"checkbox"}}}},"せん断スパン (mm)":{en:"Shear Span",items:{"スパン長":{en:"Span",column:{data:"span",type:"numeric",format:"0.0"}},"(t/2,d)":{en:"?",column:{data:"t2",type:"numeric",format:"0.0"}}}},"杭の直径 (mm)":{en:"Diameter of Circle by Pile",items:{"":{column:{data:"r",type:"numeric",format:"0.0"}}}}}}]),angular.module("webdan").factory("fatigueConfig",["$injector","rebarSideFatigueDefaults",function(e,n){return{"部材番号":{en:"",var:"",items:{"":{items:{"":{column:{data:"designPointId",path:"Member.m_no",type:"numeric",readOnly:!0}}}}}},"算出点名":{en:"",var:"",items:{"":{items:{"":{column:{data:"designPointId",path:"p_name",readOnly:!0}}}}}},"断面":{en:"",var:"",items:{B:{items:{H:{}}}},column:{data:"designPointId",path:"section",type:"numeric",readOnly:!0,renderer:function(n,t,a,r,o,i,s){Handsontable.renderers.BaseRenderer.apply(this,arguments);var u="",l=n.getSourceDataAtRow(a);if(l){var c=e.get("DesignPoint"),m=c.getAsc(l.designPointId);u=' <div class="BH">   <div class="B">'+m.Member.B+'</div>   <div class="H">'+m.Member.H+"</div> </div>"}return angular.element(t).html(u).addClass("section"),t}}},"位置":{en:"position",var:"rebar_side",items:{"":{items:{"":{}}}},values:n,column:function(e){return{data:"rebar_side",type:"numeric",readOnly:!0,renderer:function(n,t,a,r,o,i,s){Handsontable.renderers.BaseRenderer.apply(this,arguments);var u=e[i]||i;return angular.element(t).html(u),t}}}(n)},"S<sub>A</sub>/S<sub>C</sub>":{en:"S<sub>A</sub>/S<sub>C</sub>",var:"SASC",items:{"":{items:{"":{column:{data:"SASC",type:"numeric"}}}}}},"S<sub>B</sub>/S<sub>C</sub>":{en:"S<sub>B</sub>/S<sub>C</sub>",var:"SBSC",items:{"":{items:{"":{column:{data:"SBSC",type:"numeric"}}}}}},"&kappa;":{en:"&kappa; = 0.06",var:"kappa",items:{.06:{en:"0.06",var:"0.06",items:{"N<sub>A</sub>":{en:"N<sub>A</sub>",var:"NA",column:{data:"kappa.006.NA",type:"numeric"}},"N<sub>B</sub>":{en:"N<sub>B</sub>",var:"NB",column:{data:"kappa.006.NB",type:"numeric"}}}},.12:{en:"0.12",var:"0.12",items:{"N<sub>A</sub>":{en:"N<sub>A</sub>",var:"NA",column:{data:"kappa.012.NA",type:"numeric"}},"N<sub>B</sub>":{en:"N<sub>B</sub>",var:"NB",column:{data:"kappa.012.NB",type:"numeric"}}}}}},"複線補正 r<sub>2</sub>":{en:"r<sub>2</sub>",var:"r2",items:{"&alpha;":{en:"&alpha",var:"a",items:{"":{column:{data:"r2.a",type:"numeric"}}}},"&beta;":{en:"&beta;",var:"b",items:{"":{column:{data:"r2.b",type:"numeric"}}}}}}}}]),angular.module("webdan").constant("groupConfig",{"グループNo":{column:{data:"g_no",type:"numeric",format:"0.1"}},"部材名":{column:{data:"g_name",type:"text",renderer:function(e,n,t,a,r,o,i){Handsontable.renderers.TextRenderer.apply(this,arguments);var s=e.getSourceDataAtRow(t),u=i.readOnly=!s.g_no,l=u?Handsontable.DefaultSettings.prototype.readOnlyCellClassName:"";return angular.element(n).html(o).addClass(l),n}}}}),angular.module("webdan").constant("materialStrengthRestConfig",{"コンクリートの設計基準強度 f'ck (N/mm<sup>2</sup>)":{en:"desgin compressive strength of concrete",var:"fck",column:{data:"fck",type:"numeric",format:"0.1"}},"粗骨材の最大寸法 (mm)":{en:"maximum aggregate size",var:"dmax",column:{data:"dmax",type:"numeric",format:"0.1"}},"鋼材の表面形状係数 (通常は未入力) &kappa;<sub>1</sub>":{en:"",var:"k1",column:{data:"k1",type:"numeric",format:"0.1"}}}),angular.module("webdan").constant("materialStrengthConfig",{"鉄筋 (N/mm<sup>2</sup>)":{en:"bar",var:"bar",column:{data:"bar",type:"text",readOnly:!0},values:["降伏強度","設計引張強度"]},"":{en:"range",var:"range",column:{data:"range",type:"text",readOnly:!0},values:["D29 以上","D25 以下"]},"軸方向鉄筋":{en:"longitudinal rebar",var:"rebar",column:{data:"rebar",type:"numeric"}},"側方向鉄筋":{en:"Side rebar",var:"sidebar",column:{data:"sidebar",type:"numeric"}},"スターラップ":{en:"hoop tie",var:"hoop",column:{data:"hoop",type:"numeric"}},"折曲げ鉄筋":{en:"bent up bar",var:"bent",column:{data:"bent",type:"numeric"}}}),angular.module("webdan").factory("memberConfig",["HtHelper","htSpeedInput","sectionShapeDefaults","conditionDefaults",function(e,n,t,a){return{"部材番号":{en:"Member No",column:{data:"m_no",type:"numeric"},items:{"":{}}},"部材長":{en:"Member length",column:{data:"m_len",type:"numeric",format:"0.001"},items:{"":{}}},"グループ No":{en:"group no",column:{data:"g_no",type:"numeric",format:"0.0"},items:{"":{}}},"部材名":{en:"Member Name",column:{data:"g_name",type:"text",renderer:e.getTextRenderer()},items:{"":{}}},"断面形状":{en:"section shape",column:{data:"shape",type:"numeric",renderer:n.getRenderer(t)},items:{"":{}}},"断面 (mm)":{en:"section",items:{B:{en:"width",column:{data:"B",type:"numeric"}},H:{en:"height",column:{data:"H",type:"numeric"}},"B<sub>t</sub>":{en:"flange width",html:"B<sub>t</sub>",column:{data:"Bt",type:"numeric"}},t:{en:"flange Thickness",column:{data:"t",type:"numeric"}}}},"環境条件":{en:"conditions",items:{"上側":{en:"upper side",column:{data:"con_u",type:"numeric",renderer:n.getRenderer(a)}},"下側":{en:"lower side",column:{data:"con_l",type:"numeric",renderer:n.getRenderer(a)}},"せん断":{en:"shear",column:{data:"con_s",type:"numeric",renderer:n.getRenderer(a)}}}},"外観":{en:"exterior",items:{"上側":{en:"upper side",column:{data:"vis_u",type:"checkbox"}},"下側":{en:"lower side",column:{data:"vis_l",type:"checkbox"}}}},"ひび割れ":{en:"crack",items:{"&epsilon;<sub>csd</sub>":{column:{data:"ecsd",type:"numeric"}}}},"せん断":{en:"shear",items:{"k<sub>r</sub>":{column:{data:"kr",type:"numeric",format:"0.0"}}}},"鉄筋曲げ加工 r<sub>1</sub>":{en:"r1",items:{"軸鉄筋":{en:"longitudinal rebar",column:{data:"r1_1",type:"numeric",format:"0.00"}},"帯筋":{en:"hoop tie",column:{data:"r1_2",type:"numeric",format:"0.00"}},"折曲げ":{en:"bent up bar",column:{data:"r1_3",type:"numeric",format:"0.00"}}}},"部材数":{en:"count",column:{data:"n",type:"numeric"},items:{"":{}}},"疲労パス":{en:"for fatigue",column:{data:"flg_fatigue",type:"checkbox"},items:{"":{}}}}}]),angular.module("webdan").constant("msgConfig",{files:{save:{failed:["ファイルの保存に失敗しました","ファイルをダウンロードします"].join("\n"),noData:["データが読み込まれていません","データを新規作成するか、ファイルを読み込んでください"].join("\n")}}}),angular.module("webdan").factory("safetyFactorConfig",["htSpeedInput","considerRebarDefaults",function(e,n){return{"":{en:"Name",var:"name",items:{"":{column:{data:"name",type:"text",readOnly:!0}}},values:["耐久性","安全性 (疲労破壊)","安全性 (破壊)","復旧性 (損傷 地震時以外)","復旧性 (損傷 地震時)"]},"曲げ 安全係数":{en:"Safety factor for bending moment",var:"",items:{"&gamma;<sub>c</sub>":{en:"&gamma;<sub>c</sub>",var:"m_rc",column:{data:"m_rc",type:"numeric",format:"0.00"}},"&gamma;<sub>s</sub>":{en:"&gamma;<sub>s</sub>",var:"m_rs",column:{data:"m_rs",type:"numeric",format:"0.00"}},"&gamma;<sub>bs</sub>":{en:"&gamma;<sub>bs</sub>",var:"m_rbs",column:{data:"m_rbs",type:"numeric",format:"0.00"}}}},"せん断 安全係数":{en:"Safety factor for shear force",var:"",items:{"&gamma;<sub>c</sub>":{en:"&gamma;<sub>c</sub>",var:"s_rc",column:{data:"s_rc",type:"numeric",format:"0.00"}},"&gamma;<sub>s</sub>":{en:"&gamma;<sub>s</sub>",var:"s_rs",column:{data:"s_rs",type:"numeric",format:"0.00"}},"&gamma;<sub>bc</sub>":{en:"&gamma;<sub>bc</sub",var:"s_rbd",column:{data:"s_rbd",type:"numeric",format:"0.00"}},"&gamma;<sub>bs</sub>":{en:"&gamma;<sub>bs</sub>",var:"s_rbs",column:{data:"s_rbs",type:"numeric",format:"0.00"}},"&gamma;<sub>b</sub>":{en:"&gamma;<sub>b</sub>",var:"s_rb",column:{data:"s_rb",type:"numeric",format:"0.00"}}}},"係数":{en:"Member factor",var:"",items:{"&gamma;<sub>i</sub>":{en:"&gamma;<sub>i</sub>",var:"ri",column:{data:"ri",type:"numeric",format:"0.00"}}}},"鉄筋配置":{en:"Consider rebar",var:"consider_rebar",column:{data:"consider_rebar",type:"numeric",renderer:e.getRenderer(n)}}}}]),angular.module("webdan").factory("shearConfig",["$injector","HtHelper",function(e,n){return function(){return{"部材番号":{column:{data:"designPointId",path:"Member.m_no",type:"numeric",readOnly:!0},items:{"":{items:{"":{}}}}},"部材名":{column:{data:"designPointId",path:"Member.g_name",readOnly:!0},items:{"":{items:{"":{}}}}},"算出点名":{column:{data:"designPointId",path:"p_name",type:"text",renderer:n.getEditableForeignValueRenderer("DesignPoint","p_name")},items:{"":{items:{"":{}}}}},"耐久性・使用性":{en:"for examination",var:"case_10",items:{"設計耐力<span class='break'></span>検討用":{en:"",var:"pik_10",items:{"V<sub>d</sub>":{en:"V<sub>d</sub>",column:{data:"case_10.pik_10.Vd",type:"numeric",format:"0.00"}},"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_10.pik_10.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_10.pik_10.Nd",type:"numeric",format:"0.00"}}}},"永久荷重による<span class='break'></span>断面力":{en:"for examination on stress intensity of reinforcing bar",var:"pik_12",items:{"V<sub>d</sub>":{en:"V<sub>d</sub>",column:{data:"case_10.pik_11.Vd",type:"numeric",format:"0.00"}},"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_10.pik_11.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_10.pik_11.Nd",type:"numeric",format:"0.00"}}}},"変動荷重による<span class='break'></span>断面力":{en:"Check of durability (Permanent Load)",var:"pik_13",items:{"V<sub>d</sub>":{en:"V<sub>d</sub>",column:{data:"case_10.pik_12.Vd",type:"numeric",format:"0.00"}},"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_10.pik_12.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_10.pik_12.Nd",type:"numeric",format:"0.00"}}}}}},"疲労":{en:"Failure by fatigue",var:"case_20",items:{"最小応力":{en:"Failure by fatigue (Min Stress)",var:"pik_20",items:{"V<sub>d</sub>":{en:"V<sub>d</sub>",column:{data:"case_20.pik_20.Vd",type:"numeric",format:"0.00"}},"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_20.pik_20.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_20.pik_20.Nd",type:"numeric",format:"0.00"}}}},"最大応力":{en:"Failure by fatigue (Max Stress)",var:"pik_21",items:{"V<sub>d</sub>":{en:"V<sub>d</sub>",column:{data:"case_20.pik_21.Vd",type:"numeric",format:"0.00"}},"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_20.pik_21.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_20.pik_21.Nd",type:"numeric",format:"0.00"}}}}}},"破壊":{en:"ultimate limit state",var:"case_30",items:{"設計断面力":{en:"ultimate limit state",var:"pik_30",items:{"V<sub>d</sub>":{en:"V<sub>d</sub>",column:{data:"case_30.pik_30.Vd",type:"numeric",format:"0.00"}},"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_30.pik_30.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_30.pik_30.Nd",type:"numeric",format:"0.00"}}}}}},"復旧性":{en:"Restorability",var:"case_40",items:{"復旧<span class='break'></span> 地震時以外":{en:"usual",items:{"V<sub>d</sub>":{en:"V<sub>d</sub>",column:{data:"case_40.usual.Vd",type:"numeric",format:"0.00"}},"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_40.usual.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_40.usual.Nd",type:"numeric",format:"0.00"}}}},"復旧<span class='break'></span>地震時":{en:"Seismic",var:"pik_41",items:{"V<sub>d</sub>":{en:"V<sub>d</sub>",column:{data:"case_40.pik_41.Vd",type:"numeric",format:"0.00"}},"M<sub>d</sub>":{en:"M<sub>d</sub>",column:{data:"case_40.pik_41.Md",type:"numeric",format:"0.00"}},"N<sub>d</sub>":{en:"N<sub>d</sub>",column:{data:"case_40.pik_41.Nd",type:"numeric",format:"0.00"}}}}}},"スパン":{en:"ultimate limit state",var:"span",items:{"せん断<span class='break'></span>スパン長":{en:"ultimate limit state",var:"span",column:{data:"span.span",type:"numeric",format:"0.00"}},"min(t/2,d)":{en:"ultimate limit state",var:"t2",column:{data:"span.t2",type:"numeric",format:"0.00"}},"杭の直径":{en:"ultimate limit state",var:"r",column:{data:"span.r",type:"numeric",format:"0.00"}}}}}}()}]),angular.module("webdan").controller("AccountCtrl",["$scope","user","Auth","Ref","$firebaseObject","$timeout",function(e,n,t,a,r,o){function i(e){u(e,"danger")}function s(e){u(e,"success")}function u(n,t){var a={text:n+"",type:t};e.messages.unshift(a),o(function(){e.messages.splice(e.messages.indexOf(a),1)},1e4)}e.user=n,e.logout=function(){t.$signOut()},e.messages=[];var l=r(a.child("users/"+n.uid));l.$bindTo(e,"profile"),e.changePassword=function(n,a,r){e.err=null,n&&a?a!==r?i("Passwords do not match"):t.$changePassword({email:l.email,oldPassword:n,newPassword:a}).then(function(){s("Password changed")},i):i("Please enter all fields")},e.changeEmail=function(n,a){e.err=null,t.$changeEmail({password:n,newEmail:a,oldEmail:l.email}).then(function(){l.email=a,l.$save(),s("Email changed")}).catch(i)}}]),angular.module("webdan").controller("BarsCtrl",["$scope","$filter","$q","$location","Bar","DesignPoint","Member","HtHelper",function(e,n,t,a,r,o,i,s){var u=this;e.$on("reload",function(e){a.path("/")}),function(){function e(e){var t=n("number");u.bars=_.groupBy(e,function(e){var n=o.getAsc(e.designPointId);return t(n.Member.g_no,1)}),u.settings={};var a=[{prop:"designPointId",col:0},{prop:"designPointId",col:1}];angular.forEach(u.bars,function(e,n){(u.settings[n]=angular.copy(r.settings)).mergeCells=s.mergeCells(e,a)})}u.groups=i.Group.query();var a=r.query();if(a.length>0)e(a);else{var l=o.query().map(function(e){return r.createDefaultEntries("designPointId",e.id)});t.all(l).then(function(){a=r.query(),e(a)})}}()}]),angular.module("webdan").controller("BasicInformationCtrl",["$scope","$location","BasicInformation","HtObject","basicInformationConfig",function(e,n,t,a,r){var o=this;o.change=function(e){t.save(o.basicInformation)},o.isDisabled=function(e,n){if(o.basicInformation&&o.basicInformation.axial&&n){if(o.basicInformation.axial===e)return!1;o.basicInformation[n]=!1}return!0},e.$on("reload",function(e){n.path("/")}),function(){o.basicInformation=t.query();var e=o.pickup={},n=t.table;["moment","shearforce"].forEach(function(t){var i=Object.values(r["pickup."+t])[0],s=new a(o.basicInformation,{table:n,config:i});e[t]={settings:s.settings,datarows:s.datarows}}),o.config=r}()}]),angular.module("webdan").controller("BendingMomentsCtrl",["$scope","$filter","$location","BendingMoment","Group","DesignPoint",function(e,n,t,a,r,o){var i=this;e.$on("reload",function(e){t.path("/")
}),function(){function e(e){n("number"),i.bendingMoments=_.groupBy(e,function(e){var n=o.getAsc(e.designPointId);return nubmer(n.Member.g_no,1)})}i.groups=n("orderBy")(r.query(),"g_no"),i.settings=a.settings;var t=a.query();if(t.length>0)e(t);else{var s=o.query().map(function(e){return a.createDefaultEntries("designPointId",e.id)});$q.all(s).then(function(){t=a.query(),e(t)})}}()}]),angular.module("webdan").controller("CalculationPrintCtrl",["$scope","$window","$filter","$log","$location","CalculationPrint","Member","calculationPrintConfig","RCNonlinear","appConfig",function(e,n,t,a,r,o,i,s,u,l){var c=this;c.change=function(e){o.save(c.calculationPrint)},c.submit=function(e){n.open(l.CalculationPrint.calculatePage),e.$setPristine()},e.$on("reload",function(e){r.path("/")}),function(){c.config=s,c.calculationPrint=o.query(),c.groups=i.Group.query()}()}]),angular.module("webdan").controller("DesignPointsCtrl",["$scope","$filter","$q","$location","$log","DesignPoint","Member","designPointNameDefaults",function(e,n,t,a,r,o,i,s){var u=this;u.designPointNames=s,e.$on("reload",function(e){a.path("/")}),function(){function a(e){var t=n("number");u.designPoints=_.groupBy(e,function(e){var n=i.getById(e.m_no);return n&&n.g_no?t(n.g_no,1):null})}var s=i.Group.query();if(0==s.length)e.$emit("DesignPoints","no group"),r.error("no group");else{u.groups=s,u.settings=o.settings;var l=o.query();if(0==l.length){var c=i.query().forEach(function(e){return o.createDefaultEntries("m_no",e.m_no)});t.all(c).then(function(){l=o.query(),a(l)})}else a(l)}}()}]),angular.module("webdan").controller("FatiguesCtrl",["$scope","$filter","$q","$location","Fatigue","Member","DesignPoint","rebarSideFatigueDefaults","HtHelper",function(e,n,t,a,r,o,i,s,u){var l=this;e.$on("reload",function(e){a.path("/")}),function(){function e(e){var t=n("number");l.fatigues=_.groupBy(e,function(e){var n=i.getAsc(e.designPointId);return t(n.Member.g_no,1)}),l.settings={};var a=[{prop:"designPointId",col:0},{prop:"designPointId",col:1},{prop:"designPointId",col:2,rowspan:Object.keys(s).length}];angular.forEach(l.fatigues,function(e,n){(l.settings[n]=angular.copy(r.settings)).mergeCells=u.mergeCells(e,a)})}l.groups=o.Group.query();var a=r.query();if(a.length>0)e(a);else{var c=i.query().map(function(e){return r.createDefaultEntries("designPointId",e.id)});t.all(c).then(function(){a=r.query(),e(a)})}}()}]),angular.module("webdan").controller("GroupsCtrl",["$scope","$filter","Group",function(e,n,t){var a=this;!function(){a.groups=n("orderBy")(t.query(),"g_no"),a.settings=t.settings}()}]),angular.module("webdan").controller("LoginCtrl",["$scope","Auth","$location","$q","Ref","$timeout",function(e,n,t,a,r,o){function i(e){return s(e.substr(0,e.indexOf("@"))||"")}function s(e){return e+="",e.charAt(0).toUpperCase()+e.substr(1)}function u(){t.path("/account")}function l(n){e.err=n}e.oauthLogin=function(t){e.err=null,n.$signInWithPopup(t,{rememberMe:!0}).then(u,l)},e.anonymousLogin=function(){e.err=null,n.$signInAnonymously({rememberMe:!0}).then(u,l)},e.passwordLogin=function(t,a){e.err=null,n.$signInWithPassword({email:t,password:a},{rememberMe:!0}).then(u,l)},e.createAccount=function(t,s,c){function m(e){var n=r.child("users",e.uid),s=a.defer();return n.set({email:t,name:i(t)},function(e){o(function(){e?s.reject(e):s.resolve(n)})}),s.promise}e.err=null,s?s!==c?e.err="Passwords do not match":n.$createUser({email:t,password:s}).then(function(){return n.$signInWithPassword({email:t,password:s},{rememberMe:!0})}).then(m).then(u,l):e.err="Please enter a password"}}]),angular.module("webdan").controller("MainCtrl",["$scope",function(e){e.settings={colHeaders:!0,rowHeaders:!0,minSpareRows:1,contextMenu:["romove_row"],columns:[{data:"name"}]},e.bs=[{name:"b1"}]}]),angular.module("webdan").controller("MembersCtrl",["$scope","$filter","$q","Member","memberDefaults","sectionShapeDefaults","conditionDefaults",function(e,n,t,a,r,o,i){function s(){var e=a.query();0==e.length&&(a.createDefaultEntries(),e=a.query()),u.members=n("orderBy")(e,"m_no"),u.settings=a.settings}var u=this;u.shapes=o,u.conditions=i,e.$on("reload",function(e){s()}),s()}]),angular.module("webdan").controller("MenuCtrl",["$scope","$window","$rootScope","$lowdb","$log","$injector","CalculationPrint","moment","msgConfig","appConfig",function(e,n,t,a,r,o,i,s,u,l){function c(){["Member","DesignPoint","Bar","Fatigue","BendingMoment","Shear","SafetyFactor","MaterialStrength","MaterialStrengthRest","BasicInformation","CalculationPrint"].forEach(function(e){o.get(e).reload()}),t.$broadcast("reload")}var m=this;m.createNewBucket=function(){i.clear(),c()},m.loadFile=function(e){a.load(e).then(function(){c()},function(e){n.alert(e)})},m.saveAsFile=function(){try{throw u.files.save.failed}catch(e){n.confirm(e)&&a.download()}}}]),angular.module("webdan").controller("SafetyFactorsMaterialStrengthsCtrl",["$scope","$filter","$location","Member","SafetyFactor","MaterialStrength","MaterialStrengthRest","safetyFactorDefaults","materialStrengthDefaults","considerRebarDefaults","materialStrengthRestConfig","HtObject",function(e,n,t,a,r,o,i,s,u,l,c,m){var d=this;e.$on("reload",function(e){t.path("/")}),function(){d.settings={safetyFactors:r.settings,materialStrengths:o.settings},d.considerRebars=l;var e=d.groups=a.Group.query(),t=r.query();0==t.length&&(e.forEach(function(e){r.createDefaultEntries("g_no",e.g_no)}),t=r.query());var s=n("number");d.safetyFactors=_.groupBy(t,function(e){return s(e.g_no,1)});var u=o.query();0==u.length&&(e.forEach(function(e){o.createDefaultEntries("g_no",e.g_no)}),u=o.query()),d.materialStrengths=_.groupBy(u,function(e){return s(e.g_no,1)});var b=i.query();0==b.length&&(e.forEach(function(e){i.createDefaultEntries("g_no",e.g_no)}),b=i.query());var f=_.groupBy(b,function(e){return s(e.g_no,1)}),p=i.table;Object.keys(f).forEach(function(e){var n=f[e];f[e]=n.map(function(e){return new m(e,{table:p,config:c})})}),d.materialStrengthRests=f}()}]),angular.module("webdan").controller("SectionForcesCtrl",["$scope","$filter","$q","$location","BendingMoment","Shear","DesignPoint","HtHelper",function(e,n,t,a,r,o,i,s){var u=this;e.$on("reload",function(e){a.path("/")}),function(){function e(e){return e.filter(function(e){return i.getById(e.designPointId).p_name})}u.settings={bendingMoments:r.settings,shears:o.settings},angular.forEach(u.settings,function(e,n){e.enterMoves=s.enterMoves(n,3)});var n=r.query();if(n.length>0)u.bendingMoments=e(n);else{var a=i.query().map(function(e){return r.createDefaultEntries("designPointId",e.id)});t.all(a).then(function(){n=r.query(),u.bendingMoments=e(n)})}var l=o.query();if(l.length>0)u.shears=e(l);else{var c=i.query().map(function(e){return o.createDefaultEntries("designPointId",e.id)});t.all(c).then(function(){l=o.query(),u.shears=e(l)})}}()}]),angular.module("webdan").controller("ShearsCtrl",["$scope","$filter","$location","Shear","Group","DesignPoint",function(e,n,t,a,r,o){var i=this;e.$on("reload",function(e){t.path("/")}),function(){function e(e){var t=n("nubmer");i.shears=_.groupBy(e,function(e){var n=o.getAsc(e.designPointId);return t(n.Member.g_no,1)})}i.groups=n("orderBy")(r.query(),"g_no"),i.settings=a.settings;var t=a.query();if(t.length>0)e(t);else{var s=o.query().map(function(e){return a.createDefaultEntries("designPointId",e.id)});$q.all(s).then(function(){t=a.query(),e(t)})}}()}]),angular.module("webdan").controller("TabsCtrl",["$scope","$rootScope",function(e,n){var t=this;n.$on("$routeChangeSuccess",function(e,n){t.path=n.$$route.originalPath.substring(1)||"members"})}]),angular.module("webdan").constant("conditionDefaults",[{no:1,value:"一般"},{no:2,value:"腐食性"},{no:3,value:"特に厳しい腐食性"}]),angular.module("webdan").constant("designPointDefaults",[{}]),angular.module("webdan").constant("groupDefaults",{"1.0":"上層梁",1.1:"中層梁",1.2:"地中梁",1.3:"片持梁",1.4:"頂版",1.5:"底版",1.6:"フーチング","2.0":"柱 矩形",2.1:"柱 円形",2.2:"柱 小判","3.0":"杭"}),angular.module("webdan").constant("materialStrengthDefaults",{bars:["降伏強度","設計引張強度"],ranges:["D29 以上","D25 以下"]}),angular.module("webdan").constant("memberDefaults",[{m_no:1,m_len:.25},{m_no:2,m_len:8.875},{m_no:3,m_len:.25},{m_no:4,m_len:.25},{m_no:5,m_len:9.5},{m_no:6,m_len:.25},{m_no:7,m_len:.25},{m_no:8,m_len:9.5},{m_no:9,m_len:.25},{m_no:10,m_len:.25},{m_no:11,m_len:8.875},{m_no:12,m_len:.25},{m_no:13,m_len:.55},{m_no:14,m_len:8.275},{m_no:15,m_len:.55},{m_no:16,m_len:.55},{m_no:17,m_len:8.9},{m_no:18,m_len:.55},{m_no:19,m_len:.55},{m_no:20,m_len:8.9},{m_no:21,m_len:.55},{m_no:22,m_len:.55},{m_no:23,m_len:8.275},{m_no:24,m_len:.55},{m_no:25,m_len:.713},{m_no:26,m_len:.713},{m_no:27,m_len:.713},{m_no:28,m_len:.713},{m_no:29,m_len:.713},{m_no:30,m_len:14.2},{m_no:31,m_len:14.2},{m_no:32,m_len:14.2},{m_no:33,m_len:14.2},{m_no:34,m_len:14.2},{m_no:35,m_len:.4},{m_no:36,m_len:.4},{m_no:37,m_len:.4},{m_no:38,m_len:.4},{m_no:39,m_len:.4},{m_no:40,m_len:.407}]),angular.module("webdan").constant("rebarSideBarDefaults",{1:"上",2:"下"}),angular.module("webdan").constant("rebarSideFatigueDefaults",{1:"曲げ用・上",2:"曲げ用・下",3:"せん断用"}),angular.module("webdan").constant("safetyFactorDefaults",[{name:"耐久性"},{name:"安全性 (疲労破壊)"},{name:"安全性 (破壊)"},{name:"復旧性 (損傷 地震時以外)"},{name:"復旧性 (損傷 地震時)"}]),angular.module("webdan").constant("sectionShapeDefaults",[{no:1,value:"矩形"},{no:2,value:"T 形"},{no:3,value:"円形"},{no:4,value:"台形"},{no:5,value:"小判"}]),angular.module("webdan").constant("considerRebarDefaults",[{no:"1",label:"引張鉄筋",value:"rebar_01"},{no:"2",label:"引張＋圧縮",value:"rebar_02"},{no:"3",label:"全周鉄筋",value:"rebar_03"},{no:"4",label:"All 位置指定",value:"rebar_04"}]),angular.module("webdan").directive("dropzone",function(){return{restrict:"A",link:function(e,n,t){var a=e.$eval(t.receive)||angular.noop;new Dropzone(n[0],{url:"#",autoProcessQueue:!1,clickable:[t.clickable||"a[dropzone]"],acceptedFiles:t.extensions||".json",addedfile:function(e){a(e)}})}}}),angular.module("webdan").directive("htResizable",["$window","$timeout","$log","hotRegisterer",function(e,n,t,a){return{restrict:"A",link:function(r,o,i){function s(){u||(u=a.getInstance(i.hotId)),u&&u.render()}if(angular.isUndefined(i.hotId))return void t.error("required hot-id for Handsontable");var u=void 0,l=angular.isDefined(i.delay)?parseInt(i.delay):200,c=void 0;angular.element(e).on("resize",function(e){c&&(n.cancel(c),c=null),c=n(function(){s()},l)}),o.addClass("ht-resizable")}}}]),angular.module("webdan").directive("ngHideAuth",["Auth","$timeout",function(e,n){return{restrict:"A",link:function(t,a){function r(){n(function(){a.toggleClass("ng-cloak",!!e.$getAuth())},0)}a.addClass("ng-cloak"),e.$onAuthStateChanged(r),r()}}}]),angular.module("webdan").directive("ngShowAuth",["Auth","$timeout",function(e,n){return{restrict:"A",link:function(t,a){function r(){n(function(){a.toggleClass("ng-cloak",!e.$getAuth())},0)}a.addClass("ng-cloak"),e.$onAuthStateChanged(r),r()}}}]),angular.module("webdan").filter("reverse",function(){return function(e){return angular.isArray(items)?items.slice().reverse():[]}}),angular.module("webdan").factory("Bar",["LowResource","barConfig","barDefaults","HtHelper",function(e,n,t,a){var r=e({table:"bars",foreignKeys:{parents:{DesignPoint:"designPointId"}},defaultEntries:t});return _.mixin(r,a),r.htInit(n),r}]),angular.module("webdan").factory("BasicInformation",["LowResource","basicInformationConfig","HtHelper",function(e,n,t){var a=e({table:"basicInformation"});return _.mixin(a,t),a}]),angular.module("webdan").factory("BendingMoment",["LowResource","bendingMomentConfig","bendingMomentDefaults","HtHelper",function(e,n,t,a){var r=e({table:"bendingMoments",foreignKeys:{parents:{DesignPoint:"designPointId"}},defaultEntries:t});return _.mixin(r,a),r.htInit(n),a.enableEditableForeignValue({onResource:r,parent:"DesignPoint",targetProp:"p_name",config:n,refreshingHotIds:"shears"}),r}]),angular.module("webdan").factory("CalculationPrint",["LowResource","calculationPrintConfig","HtHelper",function(e,n,t){var a=e({table:"calculationPrint"});return _.mixin(a,t),a}]),angular.module("webdan").factory("DesignPoint",["$injector","LowResource","appConfig","designPointConfig","barConfig","fatigueConfig","designPointDefaults","HtHelper",function(e,n,t,a,r,o,i,s){var u=n({table:"designPoints",foreignKeys:{parents:{Member:"m_no"},children:{Bar:"designPointId",Fatigue:"designPointId",BendingMoment:"designPointId",Shear:"designPointId"}},defaultEntries:i});return _.mixin(u,s),u.htInit(a),u}]),angular.module("webdan").factory("Fatigue",["LowResource","fatigueConfig","fatigueDefaults","HtHelper",function(e,n,t,a){var r=e({table:"fatigues",foreignKeys:{parents:{DesignPoint:"designPointId"}},defaultEntries:t});return _.mixin(r,a),r.htInit(n),r}]),angular.module("webdan").service("Group",["$log","$filter","groupDefaults",function(e,n,t){function a(e,n,t){for(var a=t.length,r=void 0,o=0;o<a;o++)if(r=t[o],r.g_no==e&&r.m_no!=n)return r.g_name;return null}function r(e){e=n("number")(e,1);var a=void 0;if(angular.isUndefined(o[e])){if(angular.isUndefined(t[e]))throw"services/Group: no group name with "+e;a=o[e]=t[e]}else a=o[e];return a}var o={};this.loadMembers=function(e){o=e.reduce(function(e,n){var t=n.g_no,a=n.g_name;return t&&a&&(e[t]=a),e},{})},this.query=function(){var e=[];return angular.forEach(o,function(n,t){e.push({g_no:t,g_name:n})}),e},this.updateGroupNo=function(e,n){var t=_.get(e,"g_no"),o=_.get(e,"m_no"),i=void 0;t?(i=a(t,o,n))||(i=r(t)):i="",_.set(e,"g_name",i)},this.updateGroupName=function(n,t){var a=_.get(n,"g_no"),r=_.get(n,"g_name");a||(e.info("no Group No"),r="");var o=n.m_no;t.forEach(function(e){e.g_no==a&&e.m_no!=o&&(e.g_name=r)})}}]),angular.module("webdan").factory("MaterialStrengthRest",["$lowdb","LowResource","materialStrengthRestConfig","HtHelper",function(e,n,t,a){var r=n({table:"materialStrengthRests",foreignKeys:{parents:{Group:"g_no"}}});return _.mixin(r,a),r.createDefaultEntries=function(e,n){r.save({g_no:n})},r}]),angular.module("webdan").factory("MaterialStrength",["LowResource","materialStrengthConfig","materialStrengthDefaults","HtHelper",function(e,n,t,a){var r=e({table:"materialStrengths",foreignKeys:{parents:{Group:"g_no"}}});return r.createDefaultEntries=function(e,n){var a=t.bars,o=t.ranges;a.forEach(function(e){o.forEach(function(t){r.save({bar:e,range:t,g_no:n})})})},_.mixin(r,a),r.htInit(n),r}]);var _slicedToArray=function(){function e(e,n){var t=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(t.push(i.value),!n||t.length!==n);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();angular.module("webdan").factory("Member",["$injector","$filter","LowResource","Group","memberDefaults","memberConfig","groupDefaults","sectionShapeDefaults","conditionDefaults","HtHelper",function(e,n,t,a,r,o,i,s,u,l){var c=t({table:"members",primaryKey:"m_no",foreignKeys:{children:{DesignPoint:"m_no"}},defaultEntries:r});return c.afterChange=function(e,n){var t=this;e.forEach(function(e){var n=_slicedToArray(e,4),r=n[0],o=n[1],i=(n[2],n[3],t.getSourceDataAtRow(r));switch(o){case"g_no":case"g_name":var s=t.getSourceData();("g_no"==o?a.updateGroupNo:a.updateGroupName)(i,s)}})},c.Group={query:function(){var e=a.query();if(0==Object.keys(e).length){var t=c.query();a.loadMembers(t),e=a.query()}var r=n("number");return e=e.map(function(e){return e.g_no=r(e.g_no,1)+"",e}),n("orderBy")(e,"g_no")}},_.mixin(c,l),c.htInit(o),c}]),angular.module("webdan").factory("RCNonlinear",["$resource","appConfig",function(e,n){return e(n.CalculationPrint.server.url,{},{send:{method:"POST",withCredentials:!1}},{})}]),angular.module("webdan").factory("SafetyFactor",["LowResource","safetyFactorConfig","safetyFactorDefaults","considerRebarDefaults","HtHelper",function(e,n,t,a,r){var o=e({table:"safetyFactors",foreignKeys:{parents:{Group:"g_no"}}});return _.mixin(o,r),o.htInit(n),o}]),angular.module("webdan").factory("Shear",["LowResource","DesignPoint","shearConfig","shearDefaults","HtHelper",function(e,n,t,a,r){var o=e({table:"shears",foreignKeys:{parents:{DesignPoint:"designPointId"}},defaultEntries:a});return _.mixin(o,r),o.htInit(t),r.enableEditableForeignValue({onResource:o,parent:"DesignPoint",targetProp:"p_name",config:t,refreshingHotIds:"bendingMoments"}),o}]),angular.module("webdan").constant("barDefaults",[{rebar_side:1},{rebar_side:2}]),angular.module("webdan").constant("fatigueDefaults",[{rebar_side:1},{rebar_side:2},{rebar_side:3}]),angular.module("webdan").constant("bendingMomentDefaults",[{}]),angular.module("webdan").constant("shearDefaults",[{}]),angular.module("webdan").constant("designPointNameDefaults",[{no:1,value:"左支点"},{no:2,value:"右支点"},{no:3,value:"剛域端"},{no:4,value:"左剛域端"},{no:5,value:"右剛域端"},{no:6,value:"柱前面"},{no:7,value:"左柱前面"},{no:8,value:"右柱前面"},{no:9,value:"壁前面"},{no:10,value:"左壁前面"},{no:11,value:"右壁前面"},{no:12,value:"左ハンチ始点"},{no:13,value:"右ハンチ始点"},{no:14,value:"H/2 点"},{no:15,value:"左 H/2 点"},{no:16,value:"右 H/2 点"},{no:17,value:"左 1.5H 点"},{no:18,value:"右 1.5H 点"},{no:19,value:"スパン中央"},{no:20,value:"上 H/2 点"},{no:21,value:"下 H/2 点"},{no:22,value:"上端"},{no:23,value:"下端"},{no:24,value:"杭頭"},{no:25,value:"地中 max"},{no:26,value:"地中部"}]);